{"version":3,"file":"maptable.js","sources":["../src/utils.js","../src/defaultOptions.js","../src/components/Legend.js","../src/components/Watermark.js","../src/components/StackBlur.js","../src/components/GeoMap.js","../src/components/Filters.js","../src/components/Table.js","../src/maptable.js","../src/index.js"],"sourcesContent":["function appendOptions(select, options, defaultValue) {\n  options.forEach(f => {\n    // Filter select\n    const option = document.createElement('option');\n    option.setAttribute('value', f.value);\n    option.innerText = f.text;\n    select.appendChild(option);\n  });\n  select.value = defaultValue;\n}\n\nfunction rangeToBool(el1, range, el2) {\n  if (range === '=') {\n    return parseInt(el1, 10) === parseInt(el2, 10);\n  }\n  if (range === '≠') {\n    return parseInt(el1, 10) !== parseInt(el2, 10) && el1 !== '' && el2 !== '';\n  }\n  if (range === '>') {\n    return parseInt(el1, 10) > parseInt(el2, 10) && el1 !== '' && el2 !== '';\n  }\n  if (range === '<') {\n    return parseInt(el1, 10) < parseInt(el2, 10) && el1 !== '' && el2 !== '';\n  }\n  if (range === '≥') {\n    return parseInt(el1, 10) >= parseInt(el2, 10) && el1 !== '' && el2 !== '';\n  }\n  if (range === '≤') {\n    return parseInt(el1, 10) <= parseInt(el2, 10) && el1 !== '' && el2 !== '';\n  }\n  return true;\n}\n\nfunction hexToRgb(hex) {\n  const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  return result ?\n  `${parseInt(result[1], 16)}, ${parseInt(result[2], 16)}, ${parseInt(result[3], 16)}` : null;\n}\n\nfunction extendRecursive() {\n  const dst = {};\n  let src;\n  let p;\n  const args = [].splice.call(arguments, 0);\n  const toString = ({}).toString;\n\n  while (args.length > 0) {\n    src = args.splice(0, 1)[0];\n    if (toString.call(src) === '[object Object]') {\n      for (p in src) {\n        if (src.hasOwnProperty(p)) {\n          if (toString.call(src[p]) === '[object Object]') {\n            dst[p] = extendRecursive(dst[p] || {}, src[p]);\n          } else {\n            dst[p] = src[p];\n          }\n        }\n      }\n    }\n  }\n  return dst;\n}\n\nfunction keyToTile(k) {\n  const upperK = k.charAt(0).toUpperCase() + k.slice(1);\n  return upperK.replace(/_/g, ' ');\n}\n\nfunction sanitizeKey(k) {\n  return k.toLowerCase().replace(/ /g, '_').replace(/\"/g, '').replace(/'/g, '');\n}\n\nexport default {\n  rangeToBool,\n  appendOptions,\n  extendRecursive,\n  sanitizeKey,\n  keyToTile,\n  hexToRgb,\n};\n","export default {\n  map: {\n    longitudeKey: 'longitude',\n    latitudeKey: 'latitude',\n    countryIdentifierKey: 'country_code',\n    countryIdentifierType: 'iso_a2',\n    zoom: true,\n    ratioFromWidth: 0.5,\n    scaleHeight: 1.0,\n    scaleZoom: [1, 10],\n    fitContentMargin: 10,\n    autoFitContent: false,\n    tooltipClassName: 'popover bottom',\n    countries: {\n      legend: false,\n      attr: {\n        fill: '#FCFCFC',\n        stroke: '#CCC',\n        'stroke-width': 0.5,\n      },\n      tooltipClassName: 'mt-map-tooltip popover bottom',\n    },\n    heatmap: {\n      mask: true,\n      circles: {\n        min: 1,\n        max: 90,\n        step: 2,\n        color: '#FF0000',\n        blur: 4.0,\n        magnitudeScale: function () {\n          const maxOpacityScale = d3.scale.linear()\n            .domain([1, 100])\n            .range([0.7, 1.05]);\n          const lengthDataset = this.data.length;\n          const centralCircleOpacity = maxOpacityScale(lengthDataset) / lengthDataset;\n\n          const scale = d3.scale.linear()\n            .domain([\n              this.options.map.heatmap.circles.min,\n              this.options.map.heatmap.circles.max,\n            ])\n            .range([centralCircleOpacity, 0]);\n          return (m) => scale(m);\n        },\n      },\n      borders: {\n        stroke: 1,\n        opacity: 0.1,\n        color: '#000',\n      },\n    },\n    markers: {\n      attr: {\n        r: 4,\n        fill: 'blue',\n        stroke: '#CCC',\n        'stroke-width': 0.5,\n      },\n      tooltipClassName: 'mt-map-tooltip popover bottom',\n    },\n    title: {\n      fontSize: 12,\n      fontFamily: 'Helevetica, Arial, Sans-Serif',\n    },\n  },\n  table: {\n    className: 'table table-striped table-bordered',\n    collapseRowsBy: [],\n  },\n};\n","export default class Legend {\n  constructor(map) {\n    this.legendWidth = 220;\n    this.map = map;\n    // Create Legend\n    this.node = this.map.svg\n      .append('g')\n      .attr('id', 'mt-map-legend')\n      .attr('transform',\n        `translate(${(this.map.getWidth() - 350)}, ${(this.map.getHeight() - 60)})`);\n\n    this.buildIndice();\n  }\n\n  buildScale(domain) {\n    const legendGradient = this.node\n    .append('defs')\n    .append('linearGradient')\n      .attr('id', 'mt-map-legend-gradient')\n      .attr('x1', '0%')\n      .attr('y1', '0%')\n      .attr('x2', '100%')\n      .attr('y2', '0%');\n\n    if (this.map.options.countries.attr.fill.minNegative &&\n        this.map.options.countries.attr.fill.maxNegative ) {\n\n      // todo - maybe watch for domain[0] < 0 && domain[1] < 0? fall back to normal min & max?\n      let midPercentNegative = Math.round(((0 - domain[0])/(domain[1] - domain[0])) * 100);\n      let midPercentPositive = midPercentNegative + 1;\n\n      legendGradient.append('stop')\n          .attr('offset', '0%')\n          .attr('style', `stop-color:${this.map.options.countries.attr.fill.maxNegative};stop-opacity:1`);\n\n      legendGradient.append('stop')\n          .attr('offset', midPercentNegative + '%')\n          .attr('style', `stop-color:${this.map.options.countries.attr.fill.minNegative};stop-opacity:1`);\n      legendGradient.append('stop')\n          .attr('offset', midPercentPositive + '%')\n          .attr('style', `stop-color:${this.map.options.countries.attr.fill.min};stop-opacity:1`);\n    } else {\n      legendGradient.append('stop')\n          .attr('offset', '0%')\n          .attr('style', `stop-color:${this.map.options.countries.attr.fill.min};stop-opacity:1`);\n    }\n\n    legendGradient.append('stop')\n    .attr('offset', '100%')\n    .attr('style', `stop-color:${this.map.options.countries.attr.fill.max};stop-opacity:1`);\n\n    this.node.append('rect')\n      .attr('x', 40)\n      .attr('y', 0)\n      .attr('width', this.legendWidth)\n      .attr('height', 15)\n      .attr('fill', 'url(#mt-map-legend-gradient)');\n  }\n\n  buildIndice() {\n    const indice = this.node.append('g')\n    .attr('id', 'mt-map-legend-indice')\n    .attr('style', 'display:none')\n    .attr('transform', 'translate(36,15)');\n\n    indice.append('polygon')\n      .attr('points', '4.5 0 9 5 0 5')\n      .attr('fill', '#222222');\n\n    indice.append('text')\n      .attr('x', 4)\n      .attr('y', 13)\n      .attr('width', 10)\n      .attr('height', 10)\n      .attr('text-anchor', 'middle')\n      .attr('font-family', 'Arial')\n      .attr('font-size', '9')\n      .attr('stroke', '#FFFFF')\n      .attr('stroke-width', '1')\n      .attr('fill', '#222222')\n      .text('0');\n\n    this.node.append('text')\n      .attr('id', 'mt-map-legend-min')\n      .attr('x', 35)\n      .attr('y', 13)\n      .attr('width', 35)\n      .attr('height', 15)\n      .attr('text-anchor', 'end')\n      .attr('font-family', 'Arial')\n      .attr('font-size', '14')\n      .attr('stroke', '#FFFFF')\n      .attr('stroke-width', '3')\n      .attr('fill', '#222222')\n      .text('0');\n\n    this.node.append('text')\n      .attr('id', 'mt-map-legend-max')\n      .attr('y', 13)\n      .attr('x', 265)\n      .attr('width', 40)\n      .attr('height', 15)\n      .attr('text-anchor', 'start')\n      .attr('font-family', 'Arial')\n      .attr('font-size', '14')\n      .attr('stroke', '#FFFFF')\n      .attr('stroke-width', '3')\n      .attr('fill', '#222222')\n      .text('1');\n  }\n\n  updateExtents(domain) {\n    document.getElementById('mt-map-legend').style.opacity = (domain[0] === domain[1]) ? 0 : 1;\n    if (document.getElementById('mt-map-legend-min')) {\n      this.node.select('#mt-map-legend-min').text(Math.round(domain[0]));\n      this.node.select('#mt-map-legend-max').text(Math.round(domain[1]));\n\n      // pass in the min and max (domain) to the legend\n      this.buildScale(domain);\n    }\n  }\n\n  indiceChange(val) {\n    if (isNaN(val)) {\n      this.node.select('#mt-map-legend-indice')\n        .attr('style', 'display:none');\n    } else {\n      const maxValue = parseInt(this.node.select('#mt-map-legend-max').text(), 10);\n      const minValue = parseInt(this.node.select('#mt-map-legend-min').text(), 10);\n      let positionDelta = Math.round((0 - (minValue - val) /(maxValue - minValue)) * this.legendWidth);\n      this.node.select('#mt-map-legend-indice text').text(Math.round(val));\n      this.node.select('#mt-map-legend-indice')\n        .attr('style', 'display:block')\n        .attr('transform', `translate(${(36 + positionDelta)},15)`);\n    }\n  }\n}\n","export default class Legend {\n  constructor(map, options) {\n    this.map = map;\n    this.src = options.src;\n    this.position = options.position;\n    this.width = parseInt(options.width, 10);\n    this.height = parseInt(options.height, 10);\n    this.padding = options.padding || 10;\n    this.style = options.style;\n\n    if (!options.src) {\n      console.warn('Watermak src not found');\n      return;\n    }\n    if (isNaN(this.width)) {\n      console.warn('Watermak width not found');\n      return;\n    }\n    if (isNaN(this.height)) {\n      console.warn('Watermak height not found');\n      return;\n    }\n\n    if (window.btoa) {\n      this.buildWatermark();\n    } else {\n      console.warn('Watermark not rendered: btoa error');\n    }\n  }\n\n  buildWatermark() {\n    d3.xhr(this.src, res => {\n      let mapWatermarkDelta = 0;\n      if (this.map.options.title) mapWatermarkDelta = 30;\n      let mime;\n      let x;\n      let y;\n      if (this.src.indexOf('.svg') !== -1) {\n        mime = 'image/svg+xml';\n      } else if (this.src.indexOf('.jpg') !== -1 || this.src.indexOf('.jpeg') !== -1) {\n        mime = 'image/jpeg';\n      } else if (this.src.indexOf('.png') !== -1) {\n        mime = 'image/png';\n      } else {\n        console.warn('invalid watermark mime type');\n        return;\n      }\n      const dataUri = `data:${mime};base64,${window.btoa(res.responseText)}`;\n\n      if (this.position) {\n        const pos = this.position.split(' ');\n        if (pos[0] === 'top') {\n          y = this.padding;\n        } else if (pos[0] === 'middle') {\n          y = (this.map.getHeight() - this.height) / 2;\n        } else if (pos[0] === 'bottom') {\n          y = this.map.getHeight() - this.height - this.padding - mapWatermarkDelta;\n        } else {\n          console.warn('position should be (top|middle|bottom) (left|middle|right)');\n        }\n\n        if (pos[1] === 'left') {\n          x = this.padding;\n        } else if (pos[1] === 'middle') {\n          x = (this.map.getWidth() - this.width) / 2;\n        } else if (pos[1] === 'right') {\n          x = this.map.getWidth() - this.width - this.padding;\n        } else {\n          console.warn('position should be (top|middle|bottom) (left|middle|right)');\n        }\n      }\n\n      this.node = this.map.svg\n        .append('image')\n        .attr('xlink:href', dataUri)\n        .attr('width', this.width)\n        .attr('height', this.height);\n\n      if (x && y) {\n        this.node.attr('x', x).attr('y', y);\n      }\n\n      if (this.style) {\n        this.node.attr('style', this.style);\n      }\n    });\n  }\n}\n","/* eslint-disable */\n\n/*\n    StackBlur - a fast almost Gaussian Blur For Canvas\n    Version:     0.5\n    Author:        Mario Klingemann\n    Contact:     mario@quasimondo.com\n    Website:    http://www.quasimondo.com/StackBlurForCanvas\n    Twitter:    @quasimondo\n    In case you find this class useful - especially in commercial projects -\n    I am not totally unhappy for a small donation to my PayPal account\n    mario@quasimondo.de\n    Or support me on flattr:\n    https://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript\n    Copyright (c) 2010 Mario Klingemann\n    Permission is hereby granted, free of charge, to any person\n    obtaining a copy of this software and associated documentation\n    files (the \"Software\"), to deal in the Software without\n    restriction, including without limitation the rights to use,\n    copy, modify, merge, publish, distribute, sublicense, and/or sell\n    copies of the Software, and to permit persons to whom the\n    Software is furnished to do so, subject to the following\n    conditions:\n    The above copyright notice and this permission notice shall be\n    included in all copies or substantial portions of the Software.\n    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n    OTHER DEALINGS IN THE SOFTWARE.\n    */\n\n\nvar mul_table = [\n    512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,\n    454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,\n    482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,\n    437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,\n    497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,\n    320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,\n    446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,\n    329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,\n    505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,\n    399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,\n    324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,\n    268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,\n    451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,\n    385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,\n    332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,\n    289,287,285,282,280,278,275,273,271,269,267,265,263,261,259];\n\n\nvar shg_table = [\n    9, 11, 12, 13, 13, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 17,\n    17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 18, 19,\n    19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20,\n    20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21,\n    21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21,\n    21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22,\n    22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22,\n    22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23,\n    23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23,\n    23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23,\n    23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23,\n    23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n    24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n    24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n    24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n    24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24 ];\n\n\nfunction processImage(img, canvas, radius, blurAlphaChannel)\n{\n    if (typeof(img) == 'string') {\n        var img = document.getElementById(img);\n    }\n    else if (typeof HTMLImageElement !== 'undefined' && !img instanceof HTMLImageElement) {\n        return;\n    }\n    var w = img.naturalWidth;\n    var h = img.naturalHeight;\n\n    if (typeof(canvas) == 'string') {\n        var canvas = document.getElementById(canvas);\n    }\n    else if (typeof HTMLCanvasElement !== 'undefined' && !canvas instanceof HTMLCanvasElement) {\n        return;\n    }\n\n    canvas.style.width  = w + 'px';\n    canvas.style.height = h + 'px';\n    canvas.width = w;\n    canvas.height = h;\n\n    var context = canvas.getContext('2d');\n    context.clearRect(0, 0, w, h);\n    context.drawImage(img, 0, 0);\n\n    if (isNaN(radius) || radius < 1) return;\n\n    if (blurAlphaChannel)\n        processCanvasRGBA(canvas, 0, 0, w, h, radius);\n    else\n        processCanvasRGB(canvas, 0, 0, w, h, radius);\n}\n\nfunction getImageDataFromCanvas(canvas, top_x, top_y, width, height)\n{\n    if (typeof(canvas) == 'string')\n        var canvas  = document.getElementById(canvas);\n    else if (typeof HTMLCanvasElement !== 'undefined' && !canvas instanceof HTMLCanvasElement)\n        return;\n\n    var context = canvas.getContext('2d');\n    var imageData;\n\n    try {\n        try {\n            imageData = context.getImageData(top_x, top_y, width, height);\n        } catch(e) {\n            throw new Error(\"unable to access local image data: \" + e);\n            return;\n        }\n    } catch(e) {\n        throw new Error(\"unable to access image data: \" + e);\n    }\n\n    return imageData;\n}\n\nfunction processCanvasRGBA(canvas, top_x, top_y, width, height, radius)\n{\n    if (isNaN(radius) || radius < 1) return;\n    radius |= 0;\n\n    var imageData = getImageDataFromCanvas(canvas, top_x, top_y, width, height);\n\n    imageData = processImageDataRGBA(imageData, top_x, top_y, width, height, radius);\n\n    canvas.getContext('2d').putImageData(imageData, top_x, top_y);\n}\n\nfunction processImageDataRGBA(imageData, top_x, top_y, width, height, radius)\n{\n    var pixels = imageData.data;\n\n    var x, y, i, p, yp, yi, yw, r_sum, g_sum, b_sum, a_sum,\n        r_out_sum, g_out_sum, b_out_sum, a_out_sum,\n        r_in_sum, g_in_sum, b_in_sum, a_in_sum,\n        pr, pg, pb, pa, rbs;\n\n    var div = radius + radius + 1;\n    var w4 = width << 2;\n    var widthMinus1  = width - 1;\n    var heightMinus1 = height - 1;\n    var radiusPlus1  = radius + 1;\n    var sumFactor = radiusPlus1 * (radiusPlus1 + 1) / 2;\n\n    var stackStart = new BlurStack();\n    var stack = stackStart;\n    for (i = 1; i < div; i++)\n    {\n        stack = stack.next = new BlurStack();\n        if (i == radiusPlus1) var stackEnd = stack;\n    }\n    stack.next = stackStart;\n    var stackIn = null;\n    var stackOut = null;\n\n    yw = yi = 0;\n\n    var mul_sum = mul_table[radius];\n    var shg_sum = shg_table[radius];\n\n    for (y = 0; y < height; y++)\n    {\n        r_in_sum = g_in_sum = b_in_sum = a_in_sum = r_sum = g_sum = b_sum = a_sum = 0;\n\n        r_out_sum = radiusPlus1 * (pr = pixels[yi]);\n        g_out_sum = radiusPlus1 * (pg = pixels[yi+1]);\n        b_out_sum = radiusPlus1 * (pb = pixels[yi+2]);\n        a_out_sum = radiusPlus1 * (pa = pixels[yi+3]);\n\n        r_sum += sumFactor * pr;\n        g_sum += sumFactor * pg;\n        b_sum += sumFactor * pb;\n        a_sum += sumFactor * pa;\n\n        stack = stackStart;\n\n        for (i = 0; i < radiusPlus1; i++)\n        {\n            stack.r = pr;\n            stack.g = pg;\n            stack.b = pb;\n            stack.a = pa;\n            stack = stack.next;\n        }\n\n        for (i = 1; i < radiusPlus1; i++)\n        {\n            p = yi + ((widthMinus1 < i ? widthMinus1 : i) << 2);\n            r_sum += (stack.r = (pr = pixels[p])) * (rbs = radiusPlus1 - i);\n            g_sum += (stack.g = (pg = pixels[p+1])) * rbs;\n            b_sum += (stack.b = (pb = pixels[p+2])) * rbs;\n            a_sum += (stack.a = (pa = pixels[p+3])) * rbs;\n\n            r_in_sum += pr;\n            g_in_sum += pg;\n            b_in_sum += pb;\n            a_in_sum += pa;\n\n            stack = stack.next;\n        }\n\n\n        stackIn = stackStart;\n        stackOut = stackEnd;\n        for (x = 0; x < width; x++)\n        {\n            pixels[yi+3] = pa = (a_sum * mul_sum) >> shg_sum;\n            if (pa != 0)\n            {\n                pa = 255 / pa;\n                pixels[yi]   = ((r_sum * mul_sum) >> shg_sum) * pa;\n                pixels[yi+1] = ((g_sum * mul_sum) >> shg_sum) * pa;\n                pixels[yi+2] = ((b_sum * mul_sum) >> shg_sum) * pa;\n            } else {\n                pixels[yi] = pixels[yi+1] = pixels[yi+2] = 0;\n            }\n\n            r_sum -= r_out_sum;\n            g_sum -= g_out_sum;\n            b_sum -= b_out_sum;\n            a_sum -= a_out_sum;\n\n            r_out_sum -= stackIn.r;\n            g_out_sum -= stackIn.g;\n            b_out_sum -= stackIn.b;\n            a_out_sum -= stackIn.a;\n\n            p =  (yw + ((p = x + radius + 1) < widthMinus1 ? p : widthMinus1)) << 2;\n\n            r_in_sum += (stackIn.r = pixels[p]);\n            g_in_sum += (stackIn.g = pixels[p+1]);\n            b_in_sum += (stackIn.b = pixels[p+2]);\n            a_in_sum += (stackIn.a = pixels[p+3]);\n\n            r_sum += r_in_sum;\n            g_sum += g_in_sum;\n            b_sum += b_in_sum;\n            a_sum += a_in_sum;\n\n            stackIn = stackIn.next;\n\n            r_out_sum += (pr = stackOut.r);\n            g_out_sum += (pg = stackOut.g);\n            b_out_sum += (pb = stackOut.b);\n            a_out_sum += (pa = stackOut.a);\n\n            r_in_sum -= pr;\n            g_in_sum -= pg;\n            b_in_sum -= pb;\n            a_in_sum -= pa;\n\n            stackOut = stackOut.next;\n\n            yi += 4;\n        }\n        yw += width;\n    }\n\n\n    for (x = 0; x < width; x++)\n    {\n        g_in_sum = b_in_sum = a_in_sum = r_in_sum = g_sum = b_sum = a_sum = r_sum = 0;\n\n        yi = x << 2;\n        r_out_sum = radiusPlus1 * (pr = pixels[yi]);\n        g_out_sum = radiusPlus1 * (pg = pixels[yi+1]);\n        b_out_sum = radiusPlus1 * (pb = pixels[yi+2]);\n        a_out_sum = radiusPlus1 * (pa = pixels[yi+3]);\n\n        r_sum += sumFactor * pr;\n        g_sum += sumFactor * pg;\n        b_sum += sumFactor * pb;\n        a_sum += sumFactor * pa;\n\n        stack = stackStart;\n\n        for (i = 0; i < radiusPlus1; i++)\n        {\n            stack.r = pr;\n            stack.g = pg;\n            stack.b = pb;\n            stack.a = pa;\n            stack = stack.next;\n        }\n\n        yp = width;\n\n        for (i = 1; i <= radius; i++)\n        {\n            yi = (yp + x) << 2;\n\n            r_sum += (stack.r = (pr = pixels[yi])) * (rbs = radiusPlus1 - i);\n            g_sum += (stack.g = (pg = pixels[yi+1])) * rbs;\n            b_sum += (stack.b = (pb = pixels[yi+2])) * rbs;\n            a_sum += (stack.a = (pa = pixels[yi+3])) * rbs;\n\n            r_in_sum += pr;\n            g_in_sum += pg;\n            b_in_sum += pb;\n            a_in_sum += pa;\n\n            stack = stack.next;\n\n            if(i < heightMinus1)\n            {\n                yp += width;\n            }\n        }\n\n        yi = x;\n        stackIn = stackStart;\n        stackOut = stackEnd;\n        for (y = 0; y < height; y++)\n        {\n            p = yi << 2;\n            pixels[p+3] = pa = (a_sum * mul_sum) >> shg_sum;\n            if (pa > 0)\n            {\n                pa = 255 / pa;\n                pixels[p]   = ((r_sum * mul_sum) >> shg_sum) * pa;\n                pixels[p+1] = ((g_sum * mul_sum) >> shg_sum) * pa;\n                pixels[p+2] = ((b_sum * mul_sum) >> shg_sum) * pa;\n            } else {\n                pixels[p] = pixels[p+1] = pixels[p+2] = 0;\n            }\n\n            r_sum -= r_out_sum;\n            g_sum -= g_out_sum;\n            b_sum -= b_out_sum;\n            a_sum -= a_out_sum;\n\n            r_out_sum -= stackIn.r;\n            g_out_sum -= stackIn.g;\n            b_out_sum -= stackIn.b;\n            a_out_sum -= stackIn.a;\n\n            p = (x + (((p = y + radiusPlus1) < heightMinus1 ? p : heightMinus1) * width)) << 2;\n\n            r_sum += (r_in_sum += (stackIn.r = pixels[p]));\n            g_sum += (g_in_sum += (stackIn.g = pixels[p+1]));\n            b_sum += (b_in_sum += (stackIn.b = pixels[p+2]));\n            a_sum += (a_in_sum += (stackIn.a = pixels[p+3]));\n\n            stackIn = stackIn.next;\n\n            r_out_sum += (pr = stackOut.r);\n            g_out_sum += (pg = stackOut.g);\n            b_out_sum += (pb = stackOut.b);\n            a_out_sum += (pa = stackOut.a);\n\n            r_in_sum -= pr;\n            g_in_sum -= pg;\n            b_in_sum -= pb;\n            a_in_sum -= pa;\n\n            stackOut = stackOut.next;\n\n            yi += width;\n        }\n    }\n    return imageData;\n}\n\nfunction processCanvasRGB(canvas, top_x, top_y, width, height, radius)\n{\n    if (isNaN(radius) || radius < 1) return;\n    radius |= 0;\n\n    var imageData = getImageDataFromCanvas(canvas, top_x, top_y, width, height);\n    imageData = processImageDataRGB(imageData, top_x, top_y, width, height, radius);\n\n    canvas.getContext('2d').putImageData(imageData, top_x, top_y);\n}\n\nfunction processImageDataRGB(imageData, top_x, top_y, width, height, radius)\n{\n    var pixels = imageData.data;\n\n    var x, y, i, p, yp, yi, yw, r_sum, g_sum, b_sum,\n        r_out_sum, g_out_sum, b_out_sum,\n        r_in_sum, g_in_sum, b_in_sum,\n        pr, pg, pb, rbs;\n\n    var div = radius + radius + 1;\n    var w4 = width << 2;\n    var widthMinus1  = width - 1;\n    var heightMinus1 = height - 1;\n    var radiusPlus1  = radius + 1;\n    var sumFactor = radiusPlus1 * (radiusPlus1 + 1) / 2;\n\n    var stackStart = new BlurStack();\n    var stack = stackStart;\n    for (i = 1; i < div; i++)\n    {\n        stack = stack.next = new BlurStack();\n        if (i == radiusPlus1) var stackEnd = stack;\n    }\n    stack.next = stackStart;\n    var stackIn = null;\n    var stackOut = null;\n\n    yw = yi = 0;\n\n    var mul_sum = mul_table[radius];\n    var shg_sum = shg_table[radius];\n\n    for (y = 0; y < height; y++)\n    {\n        r_in_sum = g_in_sum = b_in_sum = r_sum = g_sum = b_sum = 0;\n\n        r_out_sum = radiusPlus1 * (pr = pixels[yi]);\n        g_out_sum = radiusPlus1 * (pg = pixels[yi+1]);\n        b_out_sum = radiusPlus1 * (pb = pixels[yi+2]);\n\n        r_sum += sumFactor * pr;\n        g_sum += sumFactor * pg;\n        b_sum += sumFactor * pb;\n\n        stack = stackStart;\n\n        for (i = 0; i < radiusPlus1; i++)\n        {\n            stack.r = pr;\n            stack.g = pg;\n            stack.b = pb;\n            stack = stack.next;\n        }\n\n        for (i = 1; i < radiusPlus1; i++)\n        {\n            p = yi + ((widthMinus1 < i ? widthMinus1 : i) << 2);\n            r_sum += (stack.r = (pr = pixels[p])) * (rbs = radiusPlus1 - i);\n            g_sum += (stack.g = (pg = pixels[p+1])) * rbs;\n            b_sum += (stack.b = (pb = pixels[p+2])) * rbs;\n\n            r_in_sum += pr;\n            g_in_sum += pg;\n            b_in_sum += pb;\n\n            stack = stack.next;\n        }\n\n\n        stackIn = stackStart;\n        stackOut = stackEnd;\n        for (x = 0; x < width; x++)\n        {\n            pixels[yi]   = (r_sum * mul_sum) >> shg_sum;\n            pixels[yi+1] = (g_sum * mul_sum) >> shg_sum;\n            pixels[yi+2] = (b_sum * mul_sum) >> shg_sum;\n\n            r_sum -= r_out_sum;\n            g_sum -= g_out_sum;\n            b_sum -= b_out_sum;\n\n            r_out_sum -= stackIn.r;\n            g_out_sum -= stackIn.g;\n            b_out_sum -= stackIn.b;\n\n            p =  (yw + ((p = x + radius + 1) < widthMinus1 ? p : widthMinus1)) << 2;\n\n            r_in_sum += (stackIn.r = pixels[p]);\n            g_in_sum += (stackIn.g = pixels[p+1]);\n            b_in_sum += (stackIn.b = pixels[p+2]);\n\n            r_sum += r_in_sum;\n            g_sum += g_in_sum;\n            b_sum += b_in_sum;\n\n            stackIn = stackIn.next;\n\n            r_out_sum += (pr = stackOut.r);\n            g_out_sum += (pg = stackOut.g);\n            b_out_sum += (pb = stackOut.b);\n\n            r_in_sum -= pr;\n            g_in_sum -= pg;\n            b_in_sum -= pb;\n\n            stackOut = stackOut.next;\n\n            yi += 4;\n        }\n        yw += width;\n    }\n\n\n    for (x = 0; x < width; x++)\n    {\n        g_in_sum = b_in_sum = r_in_sum = g_sum = b_sum = r_sum = 0;\n\n        yi = x << 2;\n        r_out_sum = radiusPlus1 * (pr = pixels[yi]);\n        g_out_sum = radiusPlus1 * (pg = pixels[yi+1]);\n        b_out_sum = radiusPlus1 * (pb = pixels[yi+2]);\n\n        r_sum += sumFactor * pr;\n        g_sum += sumFactor * pg;\n        b_sum += sumFactor * pb;\n\n        stack = stackStart;\n\n        for (i = 0; i < radiusPlus1; i++)\n        {\n            stack.r = pr;\n            stack.g = pg;\n            stack.b = pb;\n            stack = stack.next;\n        }\n\n        yp = width;\n\n        for (i = 1; i <= radius; i++)\n        {\n            yi = (yp + x) << 2;\n\n            r_sum += (stack.r = (pr = pixels[yi])) * (rbs = radiusPlus1 - i);\n            g_sum += (stack.g = (pg = pixels[yi+1])) * rbs;\n            b_sum += (stack.b = (pb = pixels[yi+2])) * rbs;\n\n            r_in_sum += pr;\n            g_in_sum += pg;\n            b_in_sum += pb;\n\n            stack = stack.next;\n\n            if(i < heightMinus1)\n            {\n                yp += width;\n            }\n        }\n\n        yi = x;\n        stackIn = stackStart;\n        stackOut = stackEnd;\n        for (y = 0; y < height; y++)\n        {\n            p = yi << 2;\n            pixels[p]   = (r_sum * mul_sum) >> shg_sum;\n            pixels[p+1] = (g_sum * mul_sum) >> shg_sum;\n            pixels[p+2] = (b_sum * mul_sum) >> shg_sum;\n\n            r_sum -= r_out_sum;\n            g_sum -= g_out_sum;\n            b_sum -= b_out_sum;\n\n            r_out_sum -= stackIn.r;\n            g_out_sum -= stackIn.g;\n            b_out_sum -= stackIn.b;\n\n            p = (x + (((p = y + radiusPlus1) < heightMinus1 ? p : heightMinus1) * width)) << 2;\n\n            r_sum += (r_in_sum += (stackIn.r = pixels[p]));\n            g_sum += (g_in_sum += (stackIn.g = pixels[p+1]));\n            b_sum += (b_in_sum += (stackIn.b = pixels[p+2]));\n\n            stackIn = stackIn.next;\n\n            r_out_sum += (pr = stackOut.r);\n            g_out_sum += (pg = stackOut.g);\n            b_out_sum += (pb = stackOut.b);\n\n            r_in_sum -= pr;\n            g_in_sum -= pg;\n            b_in_sum -= pb;\n\n            stackOut = stackOut.next;\n\n            yi += width;\n        }\n    }\n\n    return imageData;\n}\n\nfunction BlurStack()\n{\n    this.r = 0;\n    this.g = 0;\n    this.b = 0;\n    this.a = 0;\n    this.next = null;\n}\n\nexport default {\n    image: processImage,\n    canvasRGBA: processCanvasRGBA,\n    canvasRGB: processCanvasRGB,\n    imageDataRGBA: processImageDataRGBA,\n    imageDataRGB: processImageDataRGB\n};\n","import Legend from './Legend';\nimport Watermark from './Watermark';\nimport utils from '../utils';\nimport StackBlur from './StackBlur';\n\n// Used the name GeoMap instead of Map to avoid collision with the native Map class of JS\nexport default class GeoMap {\n  constructor(maptable, options, jsonWorld) {\n    const self = this;\n    this.maptable = maptable;\n    this.scale = 1;\n    this.transX = 0;\n    this.transY = 0;\n\n    this.options = options;\n\n    this.jsonWorld = jsonWorld;\n\n    this.node = document.querySelector('#mt-map');\n    if (!this.node) {\n      // Map wrapper\n      const mapWrapper = document.querySelector('.mt-map-container');\n\n      // Map\n      this.node = document.createElement('div');\n      this.node.setAttribute('id', 'mt-map');\n      mapWrapper.appendChild(this.node);\n    }\n\n    this.svg = d3.select(this.node)\n      .append('svg')\n      .attr('id', 'mt-map-svg')\n      .attr('viewBox', `0 0 ${this.getWidth()} ${this.getHeight()}`)\n      .attr('width', this.getWidth())\n      .attr('height', this.getHeight());\n\n    this.projection = d3.geo.equirectangular()\n      .translate([this.getWidth() / 2, this.getHeight() / (2 * this.options.scaleHeight)])\n      .scale((this.getWidth() / 640) * 100)\n      .rotate([-12, 0])\n      .precision(0.1);\n\n    this.path = d3.geo.path().projection(this.projection);\n\n    // Add coordinates to rawData\n    this.maptable.rawData.forEach(d => {\n      d.longitude = parseFloat(d[self.options.longitudeKey]);\n      d.latitude = parseFloat(d[self.options.latitudeKey]);\n      let coord = [0, 0];\n      if (!isNaN(d.longitude) && !isNaN(d.latitude)) {\n        coord = self.projection([d.longitude, d.latitude]);\n      }\n      d.x = coord[0];\n      d.y = coord[1];\n    });\n\n    this.zoomListener = d3.behavior\n      .zoom()\n      .scaleExtent(this.options.scaleZoom)\n      .on('zoom', this.rescale.bind(this));\n\n    // Attach Zoom event to map\n    if (this.options.zoom) {\n      this.svg = this.svg.call(this.zoomListener.bind(this));\n    }\n\n    // Add tooltip\n    this.tooltipMarkersNode = d3.select(this.node)\n      .append('div')\n      .attr('id', 'mt-map-markers-tooltip')\n      .attr('class', `mt-map-tooltip ${this.options.markers.tooltipClassName}`)\n      .style('display', 'none');\n\n    if (this.options.countries) {\n      this.tooltipCountriesNode = d3.select(this.node)\n        .append('div')\n        .attr('id', 'mt-map-countries-tooltip')\n        .attr('class', `mt-map-tooltip ${this.options.countries.tooltipClassName}`)\n        .style('display', 'none');\n    }\n\n    this.layerGlobal = this.svg.append('g').attr('class', 'mt-map-global');\n    this.layerCountries = this.layerGlobal.append('g').attr('class', 'mt-map-countries');\n    this.layerHeatmap = this.layerGlobal.append('g').attr('class', 'mt-map-heatmap');\n    this.layerMarkers = this.layerGlobal.append('g').attr('class', 'mt-map-markers');\n\n    // Add Watermark\n    if (this.options.watermark) {\n      this.watermark = new Watermark(this, this.options.watermark);\n    }\n\n    // Add Title\n    if (this.options.title) {\n      this.buildTitle();\n    }\n\n    // Add Export SVG Capability\n    if (this.options.exportSvg) {\n      this.addExportSvgCapability();\n    }\n\n    // AutoResize\n    if (!this.options.width) {\n      window.addEventListener('resize', () => {\n        this.svg.attr('width', this.getWidth());\n        this.svg.attr('height', this.getHeight());\n        this.rescale();\n      });\n    }\n\n    // Let's build things\n    this.loadGeometries();\n  }\n\n  scaleAttributes() {\n    return Math.pow(this.scale, 2 / 3);\n  }\n\n  getWidth() {\n    if (this.options.width) {\n      return this.options.width;\n    }\n    return this.node.offsetWidth;\n  }\n\n  getHeight() {\n    const deltaHeight = (this.options.title) ? 30 : 0;\n    if (!this.options.height && this.options.ratioFromWidth) {\n      return this.getWidth() * this.options.ratioFromWidth * this.options.scaleHeight + deltaHeight;\n    }\n    return this.options.height * this.options.scaleHeight + deltaHeight;\n  }\n\n  loadGeometries() {\n    // We filter world data\n    if (this.options.filterCountries) {\n      this.jsonWorld.objects.countries.geometries = this.jsonWorld.objects.countries\n        .geometries.filter(this.options.filterCountries);\n    }\n\n    // Build countries\n    if (this.options.countries) this.buildCountries();\n\n    // Build heatmap\n    if (this.options.heatmap) this.buildHeatmap();\n\n    this.render();\n  }\n\n  buildHeatmap() {\n    // Build vectors\n    const lands = topojson.merge(this.jsonWorld, this.jsonWorld.objects.countries.geometries);\n    if (!this.options.heatmap.disableMask) {\n      this.maskHeatmap = this.layerHeatmap.append('defs')\n        .append('clipPath')\n        .attr('id', 'mt-map-heatmap-mask');\n\n      this.maskHeatmap\n          .datum(lands)\n          .append('path')\n          .attr('class', 'mt-map-heatmap-mask-paths')\n          .attr('d', this.path);\n    }\n\n    this.canvasHeatmap = d3.select(this.node)\n      .append('canvas')\n      .attr('id', 'mt-map-heatmap-canvas')\n      .attr('width', this.getWidth())\n      .attr('height', this.getHeight())\n      .attr('style', 'display: none;');\n\n    this.imgHeatmap = this.layerHeatmap\n      .append('image')\n      .attr('width', '100%')\n      .attr('height', '100%')\n      .attr('class', 'mt-map-heatmap-img');\n\n    if (this.options.heatmap.mask) {\n      this.imgHeatmap = this.imgHeatmap.attr('clip-path', 'url(#mt-map-heatmap-mask)');\n    }\n\n    if (this.options.heatmap.borders) {\n      const borders = topojson.mesh(this.jsonWorld,\n        this.jsonWorld.objects.countries, (a, b) => a !== b);\n\n      this.bordersHeatmap = this.layerHeatmap\n          .append('g')\n          .attr('class', 'mt-map-heatmap-borders');\n\n      this.bordersHeatmap.selectAll('path.mt-map-heatmap-borders-paths')\n        .data([lands, borders])\n        .enter()\n        .append('path')\n        .attr('class', 'mt-map-heatmap-borders-paths')\n        .attr('fill', 'transparent')\n        .attr('stroke-width', this.options.heatmap.borders.stroke)\n        .attr('stroke', this.options.heatmap.borders.color)\n        .attr('style', `opacity: ${this.options.heatmap.borders.opacity}`)\n        .attr('d', this.path);\n    }\n  }\n\n  getHeatmapData() {\n    const ctx = this.canvasHeatmap.node().getContext('2d');\n    const circles = d3.range(\n      this.options.heatmap.circles.min,\n      this.options.heatmap.circles.max,\n      this.options.heatmap.circles.step\n    );\n    const path = this.path.context(ctx);\n    const color = utils.hexToRgb(this.options.heatmap.circles.color);\n    const magnitudeScale = this.options.heatmap.circles.magnitudeScale.bind(this.maptable)();\n    const datumScale = this.options.heatmap.circles.datumScale ?\n      this.options.heatmap.circles.datumScale.bind(this.maptable)() : () => 1;\n    this.maptable.data.forEach((point) => {\n      const coord = [point.longitude, point.latitude];\n      const scaleOpacityDatum = datumScale(point);\n      circles.forEach(m => {\n        ctx.beginPath();\n        path(d3.geo.circle().origin(coord).angle(m - 0.0001)());\n        const opacity = magnitudeScale(m) * scaleOpacityDatum;\n        ctx.fillStyle = `rgba(${color}, ${opacity})`;\n        ctx.fill();\n        ctx.closePath();\n      });\n    });\n    StackBlur.canvasRGBA(this.canvasHeatmap.node(), 0, 0, this.getWidth(),\n      this.getHeight(), this.options.heatmap.circles.blur);\n    return this.canvasHeatmap.node().toDataURL();\n  }\n\n  updateHeatmap() {\n    const dataUrl = this.getHeatmapData();\n    this.imgHeatmap.attr('xlink:href', dataUrl).attr('style', 'filter: blur(5px)');\n  }\n\n  buildCountries() {\n    this.dataCountries = topojson.feature(this.jsonWorld,\n      this.jsonWorld.objects.countries).features;\n\n    // Build country paths\n    this.layerCountries\n      .selectAll('.mt-map-country')\n        .data(this.dataCountries)\n        .enter()\n        .insert('path')\n        .attr('class', 'mt-map-country')\n        .attr('d', this.path);\n\n    // Build Country Legend\n    this.legendCountry = {};\n\n    if (this.options.countries.attr.fill &&\n        this.options.countries.attr.fill.legend &&\n        this.options.countries.attr.fill.min &&\n        this.options.countries.attr.fill.max) {\n      this.legendCountry.fill = new Legend(this);\n    }\n  }\n\n  updateCountries() {\n    // Data from user input\n    const dataByCountry = d3.nest()\n          .key(d => d[this.options.countryIdentifierKey])\n          .entries(this.maptable.data);\n\n    // We merge both data\n    this.dataCountries.forEach(geoDatum => {\n      geoDatum.key = geoDatum.properties[this.options.countryIdentifierType];\n      const matchedCountry = dataByCountry.filter(uDatum => {\n        return uDatum.key === geoDatum.key;\n      });\n      geoDatum.values = (matchedCountry.length === 0) ? [] : matchedCountry[0].values;\n      geoDatum.attr = {};\n      geoDatum.rollupValue = {};\n    });\n\n    // We calculate attributes values\n    Object.keys(this.options.countries.attr).forEach(k => {\n      this.setAttrValues(k, this.options.countries.attr[k], this.dataCountries);\n    });\n\n    // Update SVG\n    const countryItem = d3.selectAll('.mt-map-country').each(function (d) {\n      const targetPath = this;\n      Object.keys(d.attr).forEach(key => {\n        d3.select(targetPath).attr(key, d.attr[key]);\n      });\n    });\n\n    // Update Legend\n    Object.keys(this.options.countries.attr).forEach(attrKey => {\n      const attrValue = this.options.countries.attr[attrKey];\n      if (typeof (attrValue) === 'object' && attrValue.legend) {\n        const scaleDomain = d3.extent(this.dataCountries, d => Number(d.rollupValue[attrKey]));\n        this.legendCountry[attrKey].updateExtents(scaleDomain);\n\n        // When we mouseover the legend, it should highlight the indice selected\n        countryItem.on('mouseover', (d) => {\n          this.legendCountry[attrKey].indiceChange(d.rollupValue[attrKey]);\n        })\n        .on('mouseout', () => {\n          this.legendCountry[attrKey].indiceChange(NaN);\n        });\n      }\n    });\n\n    // Update Tooltip\n    if (this.options.countries && this.options.countries.tooltip) {\n      this.activateTooltip(countryItem, this.tooltipCountriesNode, this.options.countries.tooltip);\n    }\n  }\n\n  updateMarkers() {\n    const defaultGroupBy = a => `${a.longitude},${a.latitude}`;\n\n    this.dataMarkers = d3.nest()\n      .key(defaultGroupBy)\n      .entries(this.maptable.data)\n      .filter(d => {\n        return d.values[0].x !== 0;\n      });\n\n    // We merge both data\n    this.dataMarkers.forEach(d => {\n      d.attr = {};\n      d.rollupValue = {};\n    });\n\n    // We calculate attributes values\n    Object.keys(this.options.markers.attr).forEach(k => {\n      this.setAttrValues(k, this.options.markers.attr[k], this.dataMarkers);\n    });\n\n    // Enter\n    const markerItem = this.layerMarkers\n      .selectAll('.mt-map-marker')\n      .data(this.dataMarkers);\n    let markerObject = markerItem.enter();\n    if (this.options.markers.customTag) {\n      markerObject = this.options.markers.customTag(markerObject);\n    } else {\n      markerObject = markerObject.append('svg:circle');\n    }\n    const markerClassName = (this.options.markers.className) ?\n      this.options.markers.className : '';\n\n    markerObject.attr('class', `mt-map-marker ${markerClassName}`);\n\n    // Exit\n    markerItem.exit().transition()\n      .attr('r', 0)\n      .attr('fill', '#eee')\n      .style('opacity', 0)\n      .remove();\n\n    // Update\n    const attrX = (this.options.markers.attrX) ? this.options.markers.attrX : 'cx';\n    const attrY = (this.options.markers.attrY) ? this.options.markers.attrY : 'cy';\n\n    const attrXDelta = (this.options.markers.attrXDelta) ? this.options.markers.attrXDelta : 0;\n    const attrYDelta = (this.options.markers.attrYDelta) ? this.options.markers.attrYDelta : 0;\n\n    const markerUpdate = markerItem\n      .attr(attrX, d => d.values[0].x + attrXDelta)\n      .attr(attrY, d => d.values[0].y + attrYDelta);\n\n    d3.selectAll('.mt-map-marker').each(function (d) {\n      const targetPath = this;\n      Object.keys(d.attr).forEach(key => {\n        d3.select(targetPath).attr(key, d.attr[key]);\n      });\n    });\n\n    if (this.options.markers.tooltip) {\n      this.activateTooltip(markerUpdate, this.tooltipMarkersNode, this.options.markers.tooltip);\n    }\n  }\n\n  fitContent() {\n    if (this.maptable.data.length === 0) {\n      this.transX = 0;\n      this.transY = 0;\n      this.scale = 1;\n      this.zoomListener.translate([this.transX, this.transY])\n        .scale(this.scale);\n      return true;\n    }\n    const hor = d3.extent(this.maptable.data, d => d.x);\n    const ver = d3.extent(this.maptable.data, d => d.y);\n\n    // center dots with the good ratio\n    const ratio = this.getWidth() / this.getHeight();\n    const deltaMarker = 20 + ((this.options.title) ? 30 : 0);\n\n    const currentWidth = (hor[1] - hor[0]) + deltaMarker;\n    const currentHeight = (ver[1] - ver[0]) + deltaMarker;\n\n    const realHeight = currentWidth / ratio;\n    const realWidth = currentHeight * ratio;\n\n    let diffMarginWidth = 0;\n    let diffMarginHeight = 0;\n    if (realWidth >= currentWidth) {\n      diffMarginWidth = (realWidth - currentWidth) / 2;\n    } else {\n      diffMarginHeight = (realHeight - currentHeight) / 2;\n    }\n\n    // add layout margin\n    hor[0] -= (this.options.fitContentMargin + diffMarginWidth);\n    hor[1] += (this.options.fitContentMargin + diffMarginWidth);\n    ver[0] -= (this.options.fitContentMargin + diffMarginHeight);\n    ver[1] += (this.options.fitContentMargin + diffMarginHeight);\n\n    this.scale = this.getWidth() / (hor[1] - hor[0]);\n    this.transX = -1 * hor[0] * this.scale;\n    this.transY = -1 * ver[0] * this.scale;\n\n    this.zoomListener.translate([this.transX, this.transY]).scale(this.scale);\n  }\n\n  buildTitle() {\n    const titleContainer = this.svg\n      .append('svg')\n      .attr('width', this.getWidth())\n      .attr('x', 0)\n      .attr('y', (this.getHeight() - 30))\n      .attr('height', 30);\n\n    if (this.options.title.bgColor) {\n      titleContainer.append('rect')\n        .attr('x', 0)\n        .attr('y', 0)\n        .attr('width', this.getWidth())\n        .attr('height', 30)\n        .attr('fill', this.options.title.bgColor);\n    }\n\n    titleContainer.append('text')\n      .attr('id', 'mt-map-title')\n      .attr('x', 20)\n      .attr('font-size', this.options.title.fontSize)\n      .attr('font-family', this.options.title.fontFamily)\n      .attr('y', 20);\n\n    if (this.options.title.source) {\n      titleContainer.append('text')\n        .attr('y', 20)\n        .attr('x', (this.getWidth() - 20))\n        .attr('text-anchor', 'end')\n        .attr('font-size', this.options.title.fontSize)\n        .attr('font-family', this.options.title.fontFamily)\n        .html(this.options.title.source());\n    }\n  }\n\n  rescale() {\n    const self = this;\n    if (d3.event && d3.event.translate) {\n      this.scale = d3.event.scale;\n      this.transX = (this.scale === 1) ? 0 : d3.event.translate[0];\n      this.transY = (this.scale === 1) ? 0 : d3.event.translate[1];\n    }\n\n    const maxTransX = 0;\n    const maxTransY = 0;\n    const minTransX = this.getWidth() * (1 - this.scale);\n    const minTransY = this.getHeight() * (1 - this.scale);\n\n    if (this.transY > maxTransY) {\n      this.transY = maxTransY;\n    } else if (this.transY < minTransY) {\n      this.transY = minTransY;\n    }\n\n    if (this.transX > maxTransX) {\n      this.transX = maxTransX;\n    } else if (this.transX < minTransX) {\n      this.transX = minTransX;\n    }\n\n    if (d3.event && d3.event.translate) {\n      d3.event.translate[0] = this.transX;\n      d3.event.translate[1] = this.transY;\n    }\n\n    this.layerGlobal.attr('transform',\n      `translate(${this.transX}, ${this.transY})scale(${this.scale})`);\n\n    // Hide tooltip\n    if (self.tooltipCountriesNode) self.tooltipCountriesNode.attr('style', 'display:none;');\n    if (self.tooltipMarkersNode) self.tooltipMarkersNode.attr('style', 'display:none;');\n\n    // Rescale markers size\n    if (this.options.markers) {\n      // markers\n      d3.selectAll('.mt-map-marker').each(function (d) {\n        // stroke\n        if (d.attr['stroke-width']) {\n          d3.select(this).attr('stroke-width', d.attr['stroke-width'] / self.scaleAttributes());\n        }\n        // radius\n        if (d.attr.r) {\n          d3.select(this).attr('r', d.attr.r / self.scaleAttributes());\n        }\n      });\n    }\n\n    // Rescale Country stroke-width\n    if (this.options.countries) {\n      d3.selectAll('.mt-map-country').style('stroke-width',\n        this.options.countries.attr['stroke-width'] / this.scale);\n    }\n\n    // Rescale heatmap borders\n    if (this.options.heatmap && this.options.heatmap.borders) {\n      d3.selectAll('.mt-map-heatmap-borders-paths').style('stroke-width',\n        this.options.heatmap.borders.stroke / this.scale);\n    }\n  }\n\n  setAttrValues(attrKey, attrValue, dataset) {\n    if (typeof (attrValue) === 'number' || typeof (attrValue) === 'string') {\n      // Static value\n      dataset.forEach(d => {\n        d.attr[attrKey] = attrValue;\n      });\n    } else if (typeof (attrValue) === 'object') {\n      // Dynamic value\n      if (!attrValue.rollup) {\n        attrValue.rollup = (d) => d.length;\n      }\n      if (!attrValue.min || !attrValue.max) {\n        throw new Error(`MapTable: You should provide values 'min' & 'max' for attr.${attrKey}`);\n      }\n\n      dataset.forEach(d => {\n        d.rollupValue[attrKey] = attrValue.rollup(d.values);\n    });\n      const scaleDomain = d3.extent(dataset, d => Number(d.rollupValue[attrKey]));\n      if (attrValue.transform) {\n        scaleDomain[0] = attrValue.transform(scaleDomain[0]);\n        scaleDomain[1] = attrValue.transform(scaleDomain[1]);\n      }\n\n      let minValue = attrValue.min;\n      let maxValue = attrValue.max;\n\n      if (attrValue.min === 'minValue') {\n        minValue = scaleDomain[0];\n      }\n      if (attrValue.max === 'maxValue') {\n        maxValue = scaleDomain[1];\n      }\n\n      // check for negative color declarations\n      if ((attrValue.maxNegative && !attrValue.minNegative) ||\n          (!attrValue.maxNegative && attrValue.minNegative)) {\n        throw new Error(`MapTable: maxNegative or minNegative undefined. Please declare both.`);\n      }\n      const useNegative = (attrValue.maxNegative && attrValue.minNegative);\n      let scaleFunction;\n      let scaleNegativeFunction;\n      if (useNegative) {\n        scaleFunction = d3.scale.linear()\n            .domain([0, scaleDomain[1]])\n            .range([minValue, maxValue]);\n\n        scaleNegativeFunction = d3.scale.linear()\n            .domain([scaleDomain[0], 0])\n            .range([attrValue.maxNegative, attrValue.minNegative]);\n      } else {\n        scaleFunction = d3.scale.linear()\n            .domain(scaleDomain)\n            .range([minValue, maxValue]);\n      }\n\n      dataset.forEach(d => {\n        let scaledValue;\n        if (!d.values.length || isNaN(d.rollupValue[attrKey])) {\n          if (typeof (attrValue.empty) === 'undefined') {\n            throw new Error(`MapTable: no empty property found for attr.${attrKey}`);\n          }\n          scaledValue = attrValue.empty;\n        } else {\n          const originalValueRaw = d.rollupValue[attrKey];\n          const originalValue = (attrValue.transform) ?\n              attrValue.transform(originalValueRaw, this.maptable.rawData) : originalValueRaw;\n          if (useNegative && originalValue < 0){\n            scaledValue = scaleNegativeFunction(originalValue);\n          } else {\n            scaledValue = scaleFunction(originalValue);\n          }\n        }\n        d.attr[attrKey] = scaledValue;\n      });\n    } else {\n      throw new Error(`Maptable: Invalid value for ${attrKey}`);\n    }\n  }\n\n  render() {\n    if (this.options.markers) this.updateMarkers();\n    if (this.options.countries) this.updateCountries();\n    if (this.options.title) this.updateTitle();\n    if (this.options.heatmap) this.updateHeatmap();\n    if (this.options.autoFitContent) {\n      this.fitContent();\n      this.rescale();\n    }\n  }\n\n  updateTitle() {\n    if (this.options.title.content) {\n      const showing = this.maptable.data.filter(d => d[this.options.latitudeKey] !== 0).length;\n      const total = this.maptable.rawData.filter(d => d[this.options.latitudeKey] !== 0).length;\n\n      let inlineFilters = '';\n      if (this.maptable.filters) {\n        inlineFilters = this.maptable.filters.getDescription();\n      }\n\n      document.getElementById('mt-map-title').innerHTML = this.options.title\n        .content(showing, total, inlineFilters);\n    }\n  }\n\n  activateTooltip(target, tooltipNode, tooltipContent, cb) {\n    target.on('mousemove', d => {\n      const mousePosition = d3.mouse(this.svg.node()).map(v => parseInt(v, 10));\n\n      const tooltipDelta = tooltipNode.node().offsetWidth / 2;\n      const mouseLeft = (mousePosition[0] - tooltipDelta);\n      const mouseTop = (mousePosition[1] + 10);\n\n      tooltipNode.attr('style', `top:${mouseTop}px;left:${mouseLeft}px;display:block;`)\n        .html(tooltipContent(d))\n        .on('mouseout', () => tooltipNode.style('display', 'none'));\n\n      if (cb) {\n        tooltipNode.on('click', cb);\n      }\n    }).on('mouseout', () => tooltipNode.style('display', 'none'));\n  }\n\n  exportSvg() {\n    // Get the d3js SVG element\n    const svg = document.getElementById('mt-map-svg');\n    // Extract the data as SVG text string\n    const svgXml = (new XMLSerializer).serializeToString(svg);\n\n    // Submit the <FORM> to the server.\n    // The result will be an attachment file to download.\n    const form = document.getElementById('mt-map-svg-form');\n    form.querySelector('[name=\"data\"]').value = svgXml;\n    form.submit();\n  }\n\n  addExportSvgCapability() {\n    const exportNode = document.createElement('div');\n    exportNode.setAttribute('id', 'mt-map-export');\n    document.getElementById('mt-map').appendChild(exportNode);\n\n    const exportButton = document.createElement('button');\n    exportButton.setAttribute('class', 'btn btn-xs btn-default');\n    exportButton.innerHTML = 'Download';\n    exportButton.addEventListener('click', this.exportSvg.bind(this));\n    exportNode.appendChild(exportButton);\n\n    const exportForm = document.createElement('div');\n    exportForm.innerHTML = `<form id=\"mt-map-svg-form\" method=\"post\"\n      action=\"${this.options.exportSvg}\"><input type=\"hidden\" name=\"data\"></form>`;\n    exportNode.appendChild(exportForm);\n  }\n}\n","import utils from '../utils';\n\nexport default class Filters {\n  constructor(maptable, options) {\n    this.maptable = maptable;\n    this.options = options;\n    this.criteria = [];\n\n    if (this.options.show) {\n      const arrayDiff = this.options.show.filter(i => {\n        return Object.keys(this.maptable.columnDetails).indexOf(i) < 0;\n      });\n      if (arrayDiff.length > 0) {\n        throw new Error(`MapTable: invalid columns \"${arrayDiff.join(', ')}\"`);\n      }\n      this.activeColumns = this.options.show;\n    } else {\n      this.activeColumns = Object.keys(this.maptable.columnDetails);\n    }\n\n    this.container = document.createElement('div');\n    this.maptable.node.appendChild(this.container);\n\n    this.node = document.querySelector('#mt-filters');\n    if (!this.node) {\n      this.node = document.createElement('div');\n      this.node.setAttribute('id', 'mt-filters');\n      this.node.setAttribute('class', 'panel panel-default');\n      this.maptable.node.appendChild(this.node);\n    }\n\n    // -- Filters Header\n\n    const filtersHeaderNode = document.createElement('div');\n    filtersHeaderNode.setAttribute('class', 'panel-heading');\n\n    const filtersResetNode = document.createElement('button');\n    filtersResetNode.setAttribute('id', 'mt-filters-reset');\n    filtersResetNode.setAttribute('class', 'btn btn-default btn-xs pull-right');\n    filtersResetNode.style.display = 'none';\n    filtersResetNode.style.marginLeft = 5;\n    filtersResetNode.innerText = '↺ Reset';\n    filtersResetNode.addEventListener('click', this.reset);\n    filtersHeaderNode.appendChild(filtersResetNode);\n\n    const filtersTitleNode = document.createElement('h3');\n    filtersTitleNode.setAttribute('class', 'panel-title');\n    filtersTitleNode.appendChild(document.createTextNode('Filters'));\n    filtersHeaderNode.appendChild(filtersTitleNode);\n\n    this.node.appendChild(filtersHeaderNode);\n\n    // -- Filters Content\n    const filtersBodyNode = document.createElement('div');\n    filtersBodyNode.setAttribute('id', 'mt-filters-content');\n    filtersBodyNode.setAttribute('class', 'panel-body');\n\n    const filtersElementsNode = document.createElement('div');\n    filtersElementsNode.setAttribute('id', 'mt-filters-elements');\n    filtersBodyNode.appendChild(filtersElementsNode);\n\n    const filtersNewNode = document.createElement('a');\n    filtersNewNode.setAttribute('id', 'mt-filters-new');\n    filtersNewNode.setAttribute('href', '#');\n    filtersNewNode.innerText = '+ New filter';\n    filtersNewNode.addEventListener('click', this.add.bind(this));\n    filtersBodyNode.appendChild(filtersNewNode);\n\n    this.node.appendChild(filtersBodyNode);\n  }\n\n  add(evt) {\n    evt.preventDefault();\n    const possibleFilters = this.getPossibleFilters();\n\n    if (possibleFilters.length === 0) {\n      return;\n    }\n    const filterName = possibleFilters[0].key;\n    this.create(filterName);\n  }\n\n  create(filterName, replaceNode) {\n    const rowNode = this.buildRow(filterName);\n    if (replaceNode) {\n      replaceNode.parentNode.replaceChild(rowNode, replaceNode);\n    } else {\n      document.querySelector('#mt-filters-elements').appendChild(rowNode);\n    }\n    this.criteria.push(filterName);\n    this.maptable.render();\n    if (this.container.style.display === 'none') {\n      this.toggle();\n    }\n  }\n\n  remove(filterName) {\n    const rowNode = document.querySelector(`[data-mt-filter-name=\"${filterName}\"]`);\n    if (rowNode) rowNode.parentNode.removeChild(rowNode);\n    const filterIndex = this.criteria.indexOf(filterName);\n    this.criteria.splice(filterIndex, 1);\n    this.maptable.render();\n  }\n\n  reset() {\n    this.criteria = [];\n    this.container.innerHTML = '';\n    this.refresh();\n    this.maptable.map.reset();\n  }\n\n  getDescription() {\n    const outputArray = [];\n\n    const filtersChildren = document.querySelector('#mt-filters-elements').childNodes;\n\n    for (let i = 0; i < filtersChildren.length; i++) {\n      const element = filtersChildren[i];\n      const filterName = element.querySelector('.mt-filter-name').value;\n\n      const columnDetails = this.maptable.columnDetails[filterName];\n\n      let line = '';\n\n      if (columnDetails.filterMethod === 'compare') {\n        const filterRangeSelect = element.querySelector('.mt-filter-range');\n        if (filterRangeSelect.value !== 'any') {\n          if (filterRangeSelect.value === 'BETWEEN') {\n            const filterValueMin = element.querySelector('.mt-filter-value-min').value;\n            const filterValueMax = element.querySelector('.mt-filter-value-max').value;\n            if (filterValueMin === '' || filterValueMax === '') continue;\n            line += `${columnDetails.title} is between `;\n            line += `<tspan font-weight=\"bold\">${filterValueMin}</tspan> and\n              <tspan font-weight=\"bold\">${filterValueMax}</tspan>`;\n          } else {\n            const filterValue = element.querySelector('.mt-filter-value-min').value;\n            if (filterValue === '') continue;\n            line += `${columnDetails.title} is `;\n            line += filterRangeSelect.options[filterRangeSelect.selectedIndex].text;\n            line += `<tspan font-weight=\"bold\">${filterValue}</tspan>`;\n          }\n        }\n      } else if (columnDetails.filterMethod === 'field' ||\n        columnDetails.filterMethod === 'dropdown') {\n        const filterValue = element.querySelector('.mt-filter-value').value;\n        if (filterValue === '') continue;\n        const separatorWord = (columnDetails.filterMethod === 'field') ? 'contains' : 'is';\n        line += `${columnDetails.title} ${separatorWord}\n          <tspan font-weight=\"bold\">${filterValue}</tspan>`;\n      }\n      outputArray.push(line);\n    }\n    return outputArray.join(', ');\n  }\n\n  buildRow(filterName) {\n    const that = this;\n\n    const possibleFilters = this.getPossibleFilters();\n\n    const columnDetails = this.maptable.columnDetails[filterName];\n\n    const rowNode = document.createElement('div');\n    rowNode.setAttribute('class', 'mt-filter-row');\n    rowNode.setAttribute('data-mt-filter-name', filterName);\n\n    // Button to remove filter\n    const minusButton = document.createElement('button');\n    minusButton.setAttribute('class', 'btn btn-default pull-right');\n    minusButton.setAttribute('data-mt-filter-btn-minus', 1);\n    minusButton.innerText = '– Remove this filter';\n    minusButton.addEventListener('click', () => {\n      filterName = rowNode.querySelector('.mt-filter-name').value;\n      this.remove(filterName);\n    });\n    rowNode.appendChild(minusButton);\n\n    // Filters separator \"AND\"\n    const filterSeparator = document.createElement('span');\n    filterSeparator.setAttribute('class', 'mt-filters-and');\n    filterSeparator.innerText = 'And ';\n    rowNode.appendChild(filterSeparator);\n\n    // Filter name select\n    const filterNameSelect = document.createElement('select');\n    filterNameSelect.setAttribute('class', 'mt-filter-name form-control form-control-inline');\n    utils.appendOptions(filterNameSelect, possibleFilters.map(f => {\n      return { text: f.title, value: f.key };\n    }));\n    filterNameSelect.value = filterName;\n\n    filterNameSelect.addEventListener('change', function () {\n      const oldFilterName = this.parentNode.getAttribute('data-mt-filter-name');\n      const newFilterName = this.value;\n      that.create(newFilterName, this.parentNode);\n      that.remove(oldFilterName);\n      that.refresh();\n    });\n    rowNode.appendChild(filterNameSelect);\n\n    // Filter verb\n    const filterVerb = document.createElement('span');\n    filterVerb.innerText = (columnDetails.filterMethod === 'field') ? ' contains ' : ' is ';\n    rowNode.appendChild(filterVerb);\n\n    // Filter range\n    let filterRange = null;\n    if (columnDetails.filterMethod !== 'field' && columnDetails.filterMethod !== 'dropdown') {\n      filterRange = document.createElement('select');\n      filterRange.setAttribute('class', 'mt-filter-range form-control form-control-inline');\n      utils.appendOptions(filterRange, ['any', '=', '≠', '<', '>', '≤', '≥', 'BETWEEN'].map(v => {\n        return { text: v, value: v };\n      }));\n      filterRange.addEventListener('change', function () {\n        that.handleRangeChange(this);\n      });\n      rowNode.appendChild(filterRange);\n\n      // Little space:\n      rowNode.appendChild(document.createTextNode(' '));\n    }\n\n    // Filter value\n    const filterValue = document.createElement('div');\n    filterValue.style.display = 'inline-block';\n    filterValue.setAttribute('class', 'mt-filter-value-container');\n\n    if (columnDetails.filterMethod === 'compare') {\n      ['min', 'max'].forEach((val, i) => {\n        const filterInput = document.createElement('input');\n        filterInput.setAttribute('class',\n          `form-control form-control-inline mt-filter-value-${val}`);\n        filterInput.setAttribute('type', columnDetails.filterInputType);\n        filterInput.addEventListener('keyup', this.maptable.render.bind(this.maptable));\n        filterInput.addEventListener('change', this.maptable.render.bind(this.maptable));\n        filterValue.appendChild(filterInput);\n        if (i === 0) {\n          // AND\n          const filterValueAnd = document.createElement('span');\n          filterValueAnd.setAttribute('class', 'mt-filter-value-and');\n          filterValueAnd.innerText = ' and ';\n          filterValue.appendChild(filterValueAnd);\n        }\n      });\n    } else if (columnDetails.filterMethod === 'field') {\n      const filterInput = document.createElement('input');\n      filterInput.setAttribute('class', 'form-control form-control-inline mt-filter-value');\n      filterInput.setAttribute('type', 'text');\n      filterInput.addEventListener('keyup', this.maptable.render.bind(this.maptable));\n      filterInput.addEventListener('change', this.maptable.render.bind(this.maptable));\n      filterValue.appendChild(filterInput);\n    } else if (columnDetails.filterMethod === 'dropdown') {\n      const filterSelect = document.createElement('select');\n      filterSelect.setAttribute('class', 'form-control form-control-inline mt-filter-value');\n\n      const uniqueValues = d3.nest().key(d => d[filterName])\n        .sortKeys(d3.ascending)\n        .entries(this.maptable.rawData);\n\n      utils.appendOptions(filterSelect, [{ text: 'Any', value: '' }].concat(uniqueValues.map(k => {\n        return { text: k.key, value: k.key };\n      })));\n\n      filterSelect.addEventListener('change', this.maptable.render.bind(this.maptable));\n      filterValue.appendChild(filterSelect);\n    }\n\n    rowNode.appendChild(filterValue);\n\n    // We trigger it here to handle the value of the filter range\n    if (filterRange) {\n      this.handleRangeChange(filterRange);\n    }\n\n    return rowNode;\n  }\n\n  handleRangeChange(filterRange) {\n    const rowNode = filterRange.parentNode;\n    if (filterRange.value === 'any') {\n      rowNode.querySelector('.mt-filter-value-container').style.display = 'none';\n    } else {\n      rowNode.querySelector('.mt-filter-value-container').style.display = 'inline-block';\n      if (filterRange.value === 'BETWEEN') {\n        rowNode.querySelector('.mt-filter-value-min').style.display = 'inline-block';\n        rowNode.querySelector('.mt-filter-value-and').style.display = 'inline-block';\n        rowNode.querySelector('.mt-filter-value-max').style.display = 'inline-block';\n      } else {\n        rowNode.querySelector('.mt-filter-value-min').style.display = 'inline-block';\n        rowNode.querySelector('.mt-filter-value-and').style.display = 'none';\n        rowNode.querySelector('.mt-filter-value-max').style.display = 'none';\n      }\n    }\n  }\n\n  getPossibleFilters(except) {\n    return Object.keys(this.maptable.columnDetails)\n      .map(k => utils.extendRecursive({ key: k }, this.maptable.columnDetails[k]))\n      .filter(v => {\n        return (this.activeColumns.indexOf(v.key) !== -1) &&\n        (\n          (except && except === v.key) ||\n          (this.criteria.indexOf(v.key) === -1 && v.filterMethod && !v.isVirtual)\n        );\n      });\n  }\n\n  filterData() {\n    const that = this;\n    this.maptable.data = this.maptable.rawData.filter(d => {\n          const rowNodes = document.querySelectorAll('.mt-filter-row');\n    let matched = true;\n    for (let i = 0; i < rowNodes.length && matched; i++) {\n      const rowNode = rowNodes[i];\n      const filterName = rowNode.getAttribute('data-mt-filter-name');\n      const columnDetails = that.maptable.columnDetails[filterName];\n      const fmt = columnDetails.dataParse; // shortcut\n\n      if (columnDetails.filterMethod === 'dropdown') {\n        const filterValue = rowNode.querySelector('.mt-filter-value').value;\n        if (filterValue === '') continue;\n        if (d[filterName] !== filterValue) matched = false;\n      } else if (columnDetails.filterMethod === 'field') {\n        const filterValue = rowNode.querySelector('.mt-filter-value').value;\n        if (filterValue === '') continue;\n        if (d[filterName].toLowerCase().indexOf(filterValue.toLowerCase()) === -1) {\n          matched = false;\n        }\n      } else if (columnDetails.filterMethod === 'compare') {\n        const filterRange = rowNode.querySelector('.mt-filter-range').value;\n        if (filterRange === 'BETWEEN') {\n          const filterValueMin = rowNode.querySelector('.mt-filter-value-min').value;\n          const filterValueMax = rowNode.querySelector('.mt-filter-value-max').value;\n          if (filterValueMin === '' || filterValueMax === '') continue;\n          if (fmt &&\n              (fmt(d[filterName]) < fmt(filterValueMin) ||\n              fmt(d[filterName]) > fmt(filterValueMax))\n          ) {\n            matched = false;\n          } else if (\n              parseInt(d[filterName], 10) < parseInt(filterValueMin, 10) ||\n              parseInt(d[filterName], 10) > parseInt(filterValueMax, 10)\n          ) {\n            matched = false;\n          }\n        } else {\n          const filterValue = rowNode.querySelector('.mt-filter-value-min').value;\n          if (filterValue === '') continue;\n          if (fmt && !utils.rangeToBool(fmt(d[filterName]), filterRange, fmt(filterValue))) {\n            matched = false;\n          } else if (!fmt && !utils.rangeToBool(d[filterName], filterRange, filterValue)) {\n            matched = false;\n          }\n        }\n      }\n    }\n    return matched;\n  });\n  }\n\n  refresh() {\n    // update dropdown\n    const filterNameSelects = document.querySelectorAll('.mt-filter-name');\n    for (let i = 0; i < filterNameSelects.length; i++) {\n      const filterNameSelect = filterNameSelects[i];\n      const filterName = filterNameSelect.value;\n      const possibleFilters = this.getPossibleFilters(filterName);\n      filterNameSelect.innerHTML = '';\n      utils.appendOptions(filterNameSelect, possibleFilters.map(f => {\n        return { text: f.title, value: f.key };\n      }));\n      filterNameSelect.value = filterName;\n    }\n\n    // Hide the first \"And\"\n    if (document.querySelectorAll('.mt-filters-and').length > 0) {\n      document.querySelectorAll('.mt-filters-and')[0].style.visibility = 'hidden';\n    }\n\n    // Check if we reached the maximum of allowed filters\n    const disableNewFilter = (!this.getPossibleFilters().length);\n    document.querySelector('#mt-filters-new').style.visibility = disableNewFilter ?\n      'hidden' : 'visible';\n  }\n\n  toggle() {\n    if (this.container.style.display === 'none') {\n      this.container.style.display = 'block';\n      if (this.criteria.length === 0) {\n        this.add();\n      }\n    } else {\n      this.container.style.display = 'none';\n    }\n  }\n}\n","import utils from '../utils';\n\nexport default class Table {\n  constructor(maptable, options) {\n    this.maptable = maptable;\n    this.options = options;\n    this.currentSorting = { key: Object.keys(this.maptable.data[0])[0], mode: 'desc' };\n\n    this.node = document.querySelector('#mt-table');\n    if (!this.node) {\n      this.node = document.createElement('div');\n      this.node.setAttribute('id', 'mt-table');\n      this.maptable.node.appendChild(this.node);\n    }\n\n    this.node = d3.select(this.node)\n      .append('table')\n      .attr('class', this.options.className);\n\n    this.header = this.node.append('thead');\n\n    this.body = this.node.append('tbody');\n\n    if (this.options.show) {\n      const arrayDiff = this.options.show.filter(i => {\n        return Object.keys(this.maptable.columnDetails).indexOf(i) < 0;\n      });\n      if (arrayDiff.length > 0) {\n        throw new Error(`MapTable: invalid columns \"${arrayDiff.join(', ')}\"`);\n      }\n      this.activeColumns = this.options.show;\n    } else {\n      this.activeColumns = Object.keys(this.maptable.columnDetails);\n    }\n\n    this.header.selectAll('tr')\n      .data([1])\n      .enter()\n      .append('tr')\n      .selectAll('th')\n      .data(this.activeColumns.map(k => utils.extendRecursive({ key: k }, this.maptable.columnDetails[k])))\n      .enter()\n      .append('th')\n      .attr('class', d => {\n        let output = (d.sorting) ? 'mt-table-sortable' : '';\n        output += (d.nowrap) ? ' nowrap' : '';\n        return output;\n      })\n      .attr('style', d => (d.nowrap) ? 'white-space:nowrap;' : '')\n      .text(d => d.title)\n      .attr('id', d => `column_header_${utils.sanitizeKey(d.key)}`)\n      .on('click', d => {\n        if (d.sorting) {\n          this.sortColumn(d.key);\n        }\n      });\n\n    if (this.options.defaultSorting) {\n      this.sortColumn(this.options.defaultSorting.key, this.options.defaultSorting.mode);\n    } else {\n      this.render();\n    }\n  }\n\n\n  render() {\n    // Apply Sort\n    this.applySort();\n\n    // Enter\n    this.body.selectAll('tr')\n      .data(this.maptable.data)\n      .enter()\n      .append('tr');\n\n    // Exit\n    this.body.selectAll('tr')\n      .data(this.maptable.data)\n      .exit()\n      .remove();\n\n    // Update\n    const uniqueCollapsedRows = [];\n    this.body.selectAll('tr')\n      .data(this.maptable.data)\n      .attr('class', row => {\n        if (this.options.rowClassName) {\n          return `line ${this.options.rowClassName(row)}`;\n        }\n        return 'line';\n      })\n      .html(row => {\n        let tds = '';\n        this.activeColumns.forEach(columnKey => {\n          const column = this.maptable.columnDetails[columnKey];\n          tds += '<td';\n          if (column.nowrap) {\n            tds += ' style=\"white-space:nowrap;\"';\n          }\n          tds += '>';\n\n          if (!(\n              this.options.collapseRowsBy.indexOf(columnKey) !== -1 &&\n              uniqueCollapsedRows[columnKey] &&\n              uniqueCollapsedRows[columnKey] === row[columnKey]\n            )) {\n            if (column.cellContent) {\n              tds += column.cellContent(row);\n            } else if (column.virtual) {\n              tds += column.virtual(row);\n            } else {\n              if (row[columnKey] && row[columnKey] !== 'null') tds += row[columnKey];\n            }\n            if (this.options.collapseRowsBy.indexOf(columnKey) !== -1) {\n              uniqueCollapsedRows[columnKey] = row[columnKey];\n            }\n          }\n          tds += '</td>';\n        });\n        return tds;\n      });\n  }\n\n  applySort() {\n    const d3SortMode = (this.currentSorting.mode === 'asc') ? d3.ascending : d3.descending;\n    const columnDetails = this.maptable.columnDetails[this.currentSorting.key];\n    this.maptable.data = this.maptable.data.sort((a, b) => {\n      let el1 = a[this.currentSorting.key];\n      let el2 = b[this.currentSorting.key];\n      if (columnDetails.dataParse) {\n        el1 = columnDetails.dataParse(el1);\n        el2 = columnDetails.dataParse(el2);\n      } else if (columnDetails.virtual) {\n        el2 = columnDetails.virtual(a);\n        el2 = columnDetails.virtual(b);\n      } else if (columnDetails.filterType === 'compare') {\n        el1 = parseInt(el1, 10);\n        el2 = parseInt(el2, 10);\n      } else {\n        el1 = el1.toLowerCase();\n        el2 = el2.toLowerCase();\n      }\n      return d3SortMode(el1, el2);\n    });\n  }\n\n  sortColumn(columnKey, columnMode) {\n    this.currentSorting.key = columnKey;\n    if (columnKey === this.currentSorting.key) {\n      this.currentSorting.mode = (this.currentSorting.mode === 'asc') ? 'desc' : 'asc';\n    } else {\n      this.currentSorting.mode = 'asc';\n    }\n\n    const sortableColums = document.querySelectorAll('.mt-table-sortable');\n    for (let i = 0; i < sortableColums.length; i++) {\n      sortableColums[i].setAttribute('class', 'mt-table-sortable');\n    }\n    document.getElementById(`column_header_${utils.sanitizeKey(columnKey)}`)\n      .setAttribute('class', `mt-table-sortable sort_${this.currentSorting.mode}`);\n\n    this.render();\n  }\n}\n","import utils from './utils';\n\nimport GeoMap from './components/GeoMap';\nimport Filters from './components/Filters';\nimport Table from './components/Table';\n\nexport default class MapTable {\n  constructor(target, options) {\n    this.options = options;\n\n    this.node = document.querySelector(target);\n    this.node.setAttribute('style', 'position:relative;');\n\n    if (this.options.data.type === 'json') {\n      d3.json(this.options.data.path, this.loadData.bind(this));\n    } else if (this.options.data.type === 'csv') {\n      d3.csv(this.options.data.path, this.loadData.bind(this));\n    } else if (this.options.data.type === 'tsv') {\n      d3.tsv(this.options.data.path, this.loadData.bind(this));\n    }\n\n    if (this.options.map && this.options.map.heatmap) {\n      delete this.options.map.countries;\n    }\n  }\n\n  loadData(err, data) {\n    if (err) {\n      throw err;\n    }\n    this.rawData = data;\n\n    if (this.options.data.preFilter) {\n      this.rawData = this.rawData.filter(this.options.data.preFilter);\n    }\n\n    this.setColumnDetails();\n    this.data = this.rawData.slice(); // we clone data, so that we can filter it\n    // Map\n    if (this.options.map) {\n      // Map wrapper\n      const mapWrapper = document.createElement('div');\n      mapWrapper.setAttribute('class', 'mt-map-container');\n      this.node.insertBefore(mapWrapper, this.node.firstChild);\n      d3.json(this.options.map.path, (errGeoMap, jsonWorld) => {\n        if (errGeoMap) {\n          throw errGeoMap;\n        }\n        this.map = new GeoMap(this, this.options.map, jsonWorld);\n        this.render();\n      });\n    }\n\n    // Filters\n    if (this.options.filters) {\n      this.filters = new Filters(this, this.options.filters);\n    }\n\n    // Table\n    if (this.options.table) {\n      this.table = new Table(this, this.options.table);\n    }\n  }\n\n  render() {\n    if (this.filters) {\n      this.filters.filterData();\n      this.filters.refresh();\n    }\n\n    if (this.map) {\n      this.map.render();\n    }\n\n    if (this.table) {\n      this.table.render();\n    }\n  }\n\n  setColumnDetails() {\n    const that = this;\n    if (that.rawData.length === 0) {\n      return;\n    }\n    const defaultColumns = {};\n\n    Object.keys(that.rawData[0]).forEach(k => {\n      const patternNumber = /^\\d+$/;\n      const isNumber = (patternNumber.test(that.rawData[0][k]));\n      defaultColumns[k] = {\n        title: utils.keyToTile(k),\n        filterMethod: (isNumber) ? 'compare' : 'field',\n        filterInputType: (isNumber) ? 'number' : 'text',\n        sorting: true,\n      };\n      if (isNumber) {\n        defaultColumns[k].dataParse = (val) => parseInt(val, 10);\n      }\n    });\n    that.columnDetails = utils.extendRecursive(defaultColumns, this.options.columns);\n\n    // add isVirtual to columns details\n    Object.keys(that.columnDetails).forEach(k => {\n      that.columnDetails[k].isVirtual = (typeof (that.columnDetails[k].virtual) === 'function');\n    });\n  }\n}\n","/* eslint no-unused-vars: 0 */\nimport utils from './utils';\nimport defaultOptions from './defaultOptions';\nimport MapTable from './maptable';\n\nd3.maptable = function (target) {\n  let maptableObject;\n  const maptable = {};\n  const options = {\n    target: target,\n    columns: {},\n    data: {},\n    map: null,\n    filters: null,\n    table: null,\n  };\n\n  maptable.map = function (mapOptions = {}) {\n    if (!topojson) {\n      throw new Error('Maptable requires topojson.js');\n    }\n    if (typeof(mapOptions.path) !== 'string') {\n      throw new Error('MapTable: map not provided');\n    }\n    options.map = mapOptions;\n    return maptable;\n  };\n\n  maptable.json = function (jsonPath, preFilter) {\n    options.data.type = 'json';\n    options.data.path = jsonPath;\n    options.data.preFilter = preFilter;\n    return maptable;\n  };\n\n  maptable.csv = function (csvPath, preFilter) {\n    options.data.type = 'csv';\n    options.data.path = csvPath;\n    options.data.preFilter = preFilter;\n    return maptable;\n  };\n\n  maptable.tsv = function (tsvPath, preFilter) {\n    options.data.type = 'tsv';\n    options.data.path = tsvPath;\n    options.data.preFilter = preFilter;\n    return maptable;\n  };\n\n  maptable.filters = function (filtersOptions = {}) {\n    options.filters = filtersOptions;\n    return maptable;\n  };\n\n  maptable.table = function (tableOptions = {}) {\n    options.table = tableOptions;\n    return maptable;\n  };\n\n  maptable.columns = function (columns = {}) {\n    options.columns = columns;\n    return maptable;\n  };\n\n  maptable.render = function () {\n    if (typeof(target) !== 'string' || !document.querySelector(target)) {\n      throw new Error('MapTable: target not found');\n    }\n\n    if (!options.data || !options.data.path) {\n      throw new Error('MapTable: Please provide the path for your dataset json|csv|tsv');\n    }\n\n    const customOptions = utils.extendRecursive(defaultOptions, options);\n    maptableObject = new MapTable(target, customOptions);\n  };\n  return maptable;\n};\n\nif (!d3) {\n  throw new Error('Maptable requires d3.js');\n}\n\nexport default d3.maptable;\n"],"names":["Legend","Watermark"],"mappings":"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"}