{"version":3,"file":"maptable.js","sources":["../src/utils.js","../src/defaultOptions.js","../src/components/Legend.js","../src/components/Watermark.js","../src/components/GeoMap.js","../src/components/Filters.js","../src/components/Table.js","../src/MapTable.js","../src/index.js"],"sourcesContent":["function appendOptions(select, options, defaultValue) {\n  options.forEach(f => {\n    // Filter select\n    const option = document.createElement('option');\n    option.setAttribute('value', f.value);\n    option.innerText = f.text;\n    select.appendChild(option);\n  });\n  select.value = defaultValue;\n}\n\nfunction rangeToBool(el1, range, el2) {\n  if (range === '=') {\n    return parseInt(el1, 10) === parseInt(el2, 10);\n  }\n  if (range === '≠') {\n    return parseInt(el1, 10) !== parseInt(el2, 10) && el1 !== '' && el2 !== '';\n  }\n  if (range === '>') {\n    return parseInt(el1, 10) > parseInt(el2, 10) && el1 !== '' && el2 !== '';\n  }\n  if (range === '<') {\n    return parseInt(el1, 10) < parseInt(el2, 10) && el1 !== '' && el2 !== '';\n  }\n  if (range === '≥') {\n    return parseInt(el1, 10) >= parseInt(el2, 10) && el1 !== '' && el2 !== '';\n  }\n  if (range === '≤') {\n    return parseInt(el1, 10) <= parseInt(el2, 10) && el1 !== '' && el2 !== '';\n  }\n  return true;\n}\n\nfunction extendRecursive(obj1, obj2) {\n  if (!obj1) obj1 = {};\n  if (!obj2) obj2 = {};\n  Object.keys(obj2).forEach(p => {\n    try {\n      // Property in destination object set; update its value.\n      if (obj2[p].constructor === Object) {\n        obj1[p] = extendRecursive(obj1[p], obj2[p]);\n      } else {\n        obj1[p] = obj2[p];\n      }\n    } catch (e) {\n      // Property in destination object not set; create it and set its value.\n      obj1[p] = obj2[p];\n    }\n  });\n\n  return obj1;\n}\n\nfunction keyToTile(k) {\n  const upperK = k.charAt(0).toUpperCase() + k.slice(1);\n  return upperK.replace(/_/g, ' ');\n}\n\nfunction sanitizeKey(k) {\n  return k.toLowerCase().replace(/ /g, '_').replace(/\"/g, '').replace(/'/g, '');\n}\n\nexport default {\n  rangeToBool: rangeToBool,\n  appendOptions: appendOptions,\n  extendRecursive: extendRecursive,\n  sanitizeKey: sanitizeKey,\n  keyToTile: keyToTile,\n};\n","export default {\n  map: {\n    longitudeKey: 'longitude',\n    latitudeKey: 'latitude',\n    zoom: true,\n    legend: false,\n    ratioFromWidth: 0.5,\n    scaleHeight: 1.0,\n    scaleZoom: [1, 10],\n    fitContentMargin: 10,\n    autoFitContent: true,\n    tooltipClass: 'popover bottom',\n    countries: {\n      attr: {\n        fill: '#FCFCFC',\n        stroke: '#CCC',\n        'stroke-width': 0.5,\n      },\n    },\n    markers: {\n      attr: {\n        r: 4,\n        fill: 'blue',\n        stroke: '#CCC',\n        'stroke-width': 0.5,\n      },\n    },\n    title: {\n      fontSize: 12,\n      fontFamily: 'Helevetica, Arial, Sans-Serif',\n    },\n  },\n  table: {\n    className: 'table table-striped table-bordered',\n    collapseRowsBy: [],\n  },\n};\n","export default class Legend {\n  constructor(map) {\n    this.map = map;\n    // Create Legend\n    this.node = this.map.svg\n      .append('g')\n      .attr('id', 'mt-map-legend')\n      .attr('transform',\n        `translate(${(this.map.getWidth() - 300)}, ${(this.map.getHeight() - 60)})`);\n\n    this.buildScale();\n    this.buildIndice();\n  }\n\n  buildScale() {\n    const legendGradient = this.node\n    .append('defs')\n    .append('linearGradient')\n      .attr('id', 'mt-map-legend-gradient')\n      .attr('x1', '0%')\n      .attr('y1', '0%')\n      .attr('x2', '100%')\n      .attr('y2', '0%');\n\n    legendGradient.append('stop')\n    .attr('offset', '0%')\n    .attr('style', `stop-color:${this.map.options.countries.attr.fill.min};stop-opacity:1`);\n\n    legendGradient.append('stop')\n    .attr('offset', '100%')\n    .attr('style', `stop-color:${this.map.options.countries.attr.fill.max};stop-opacity:1`);\n\n    this.node.append('rect')\n      .attr('x', 40)\n      .attr('y', 0)\n      .attr('width', 220)\n      .attr('height', 15)\n      .attr('fill', 'url(#mt-map-legend-gradient)');\n  }\n\n  buildIndice() {\n    const indice = this.node.append('g')\n    .attr('id', 'mt-map-legend-indice')\n    .attr('style', 'display:none')\n    .attr('transform', 'translate(36,15)');\n\n    indice.append('polygon')\n      .attr('points', '4.5 0 9 5 0 5')\n      .attr('fill', '#222222');\n\n    indice.append('text')\n      .attr('x', 4)\n      .attr('y', 13)\n      .attr('width', 10)\n      .attr('height', 10)\n      .attr('text-anchor', 'middle')\n      .attr('font-family', 'Arial')\n      .attr('font-size', '9')\n      .attr('stroke', '#FFFFF')\n      .attr('stroke-width', '1')\n      .attr('fill', '#222222')\n      .text('0');\n\n    this.node.append('text')\n      .attr('id', 'mt-map-legend-min')\n      .attr('x', 35)\n      .attr('y', 13)\n      .attr('width', 35)\n      .attr('height', 15)\n      .attr('text-anchor', 'end')\n      .attr('font-family', 'Arial')\n      .attr('font-size', '14')\n      .attr('stroke', '#FFFFF')\n      .attr('stroke-width', '3')\n      .attr('fill', '#222222')\n      .text('0');\n\n    this.node.append('text')\n      .attr('id', 'mt-map-legend-max')\n      .attr('y', 13)\n      .attr('x', 265)\n      .attr('width', 40)\n      .attr('height', 15)\n      .attr('text-anchor', 'start')\n      .attr('font-family', 'Arial')\n      .attr('font-size', '14')\n      .attr('stroke', '#FFFFF')\n      .attr('stroke-width', '3')\n      .attr('fill', '#222222')\n      .text('1');\n  }\n\n  updateExtents(domain) {\n    document.getElementById('mt-map-legend').style.opacity = (domain[0] === domain[1]) ? 0 : 1;\n    if (document.getElementById('mt-map-legend-min')) {\n      this.node.select('#mt-map-legend-min').text(domain[0]);\n      this.node.select('#mt-map-legend-max').text(domain[1]);\n    }\n  }\n\n  indiceChange(val) {\n    if (isNaN(val)) {\n      this.node.select('#mt-map-legend-indice')\n        .attr('style', 'display:none');\n    } else {\n      const maxValue = parseInt(this.node.select('#mt-map-legend-max').text(), 10);\n      const positionDelta = (val / maxValue) * 220;\n      this.node.select('#mt-map-legend-indice text').text(val);\n      this.node.select('#mt-map-legend-indice')\n        .attr('style', 'display:block')\n        .attr('transform', `translate(${(36 + positionDelta)},15)`);\n    }\n  }\n}\n","export default class Legend {\n  constructor(map, options) {\n    this.map = map;\n    this.src = options.src;\n    this.position = options.position;\n    this.width = parseInt(options.width, 10);\n    this.height = parseInt(options.height, 10);\n    this.padding = options.padding || 10;\n    this.style = options.style;\n\n    if (!options.src) {\n      console.warn('Watermak src not found');\n      return;\n    }\n    if (isNaN(this.width)) {\n      console.warn('Watermak width not found');\n      return;\n    }\n    if (isNaN(this.height)) {\n      console.warn('Watermak height not found');\n      return;\n    }\n\n    if (window.btoa) {\n      this.buildWatermark();\n    } else {\n      console.warn('Watermark not rendered: btoa error');\n    }\n  }\n\n  buildWatermark() {\n    d3.xhr(this.src, res => {\n      let mapWatermarkDelta = 0;\n      if (this.map.options.title) mapWatermarkDelta = 30;\n      let mime;\n      let x;\n      let y;\n      if (this.src.indexOf('.svg') !== -1) {\n        mime = 'image/svg+xml';\n      } else if (this.src.indexOf('.jpg') !== -1 || this.src.indexOf('.jpeg') !== -1) {\n        mime = 'image/jpeg';\n      } else if (this.src.indexOf('.png') !== -1) {\n        mime = 'image/png';\n      } else {\n        console.warn('invalid watermark mime type');\n        return;\n      }\n      const dataUri = `data:${mime};base64,${window.btoa(res.responseText)}`;\n\n      if (this.position) {\n        const pos = this.position.split(' ');\n        if (pos[0] === 'top') {\n          y = this.padding;\n        } else if (pos[0] === 'middle') {\n          y = (this.map.getHeight() - this.height) / 2;\n        } else if (pos[0] === 'bottom') {\n          y = this.map.getHeight() - this.height - this.padding - mapWatermarkDelta;\n        } else {\n          console.warn('position should be (top|middle|bottom) (left|middle|right)');\n        }\n\n        if (pos[1] === 'left') {\n          x = this.padding;\n        } else if (pos[1] === 'middle') {\n          x = (this.map.getWidth() - this.width) / 2;\n        } else if (pos[1] === 'right') {\n          x = this.map.getWidth() - this.width - this.padding;\n        } else {\n          console.warn('position should be (top|middle|bottom) (left|middle|right)');\n        }\n      }\n\n      this.node = this.map.svg\n        .append('image')\n        .attr('xlink:href', dataUri)\n        .attr('width', this.width)\n        .attr('height', this.height);\n\n      if (x && y) {\n        this.node.attr('x', x).attr('y', y);\n      }\n\n      if (this.style) {\n        this.node.attr('style', this.style);\n      }\n    });\n  }\n}\n","import Legend from './Legend';\nimport Watermark from './Watermark';\n\n// Used the name GeoMap instead of Map to avoid collision with the native Map class of JS\nexport default class GeoMap {\n  constructor(maptable, options, jsonWorld) {\n    const that = this;\n    this.maptable = maptable;\n    this.scale = 1;\n    this.transX = 0;\n    this.transY = 0;\n\n    this.options = options;\n\n    this.jsonWorld = jsonWorld;\n\n    this.node = document.querySelector('#mt-map');\n    if (!this.node) {\n      this.node = document.createElement('div');\n      this.node.setAttribute('class', 'mt-map');\n      this.maptable.node.insertBefore(this.node, this.maptable.node.firstChild);\n    }\n\n    this.svg = d3.select(this.node)\n      .append('svg')\n      .attr('id', 'mt-map-svg')\n      .attr('viewBox', `0 0 ${this.getWidth()} ${this.getHeight()}`)\n      .attr('width', this.getWidth())\n      .attr('height', this.getHeight());\n\n    // Resize parent div\n    d3.select(this.node)\n      .attr('style', `height:${this.getHeight()}px`);\n\n    this.projection = d3.geo.equirectangular()\n      .translate([this.getWidth() / 2, this.getHeight() / (2 * this.options.scaleHeight)])\n      .scale((this.getWidth() / 640) * 100)\n      .rotate([-12, 0])\n      .precision(0.1);\n\n    // Add coordinates to rawData\n    this.maptable.rawData.forEach(d => {\n      d.longitude = parseFloat(d[that.options.longitudeKey]);\n      d.latitude = parseFloat(d[that.options.latitudeKey]);\n      const coord = that.projection([d.longitude, d.latitude]);\n      d.x = coord[0];\n      d.y = coord[1];\n      return d;\n    });\n\n    this.zoomListener = d3.behavior\n      .zoom()\n      .scaleExtent(this.options.scaleZoom)\n      .on('zoom', this.rescale.bind(this));\n\n    // Attach Zoom event to map\n    if (this.options.zoom) {\n      this.svg = this.svg.call(this.zoomListener.bind(this));\n    }\n\n    // Add tooltip\n    this.tooltipNode = d3.select(this.node)\n      .append('div')\n      .attr('class', `mt-map-tooltip ${this.options.tooltipClass}`)\n      .style('display', 'none');\n\n    this.layerGlobal = this.svg.append('g').attr('class', 'mt-map-global');\n    this.layerCountries = this.layerGlobal.append('g').attr('class', 'mt-map-countries');\n    this.layerMarkers = this.layerGlobal.append('g').attr('class', 'mt-map-markers');\n    this.loadGeometries();\n\n    // Add Watermark\n    if (this.options.watermark) {\n      this.watermark = new Watermark(this, this.options.watermark);\n    }\n\n    // Add Title\n    if (this.options.title) {\n      this.buildTitle();\n    }\n\n    // Add Export SVG Capability\n    if (this.options.exportSvg) {\n      this.addExportSvgCapability();\n    }\n  }\n\n  scaleAttributes() {\n    return Math.pow(this.scale, 2 / 3);\n  }\n\n  getWidth() {\n    if (this.options.width) {\n      return this.options.width;\n    }\n    return this.node.offsetWidth;\n  }\n\n  getHeight() {\n    const deltaHeight = (this.options.title) ? 30 : 0;\n    if (!this.options.height && this.options.ratioFromWidth) {\n      return this.getWidth() * this.options.ratioFromWidth * this.options.scaleHeight + deltaHeight;\n    }\n    return this.options.height * this.options.scaleHeight + deltaHeight;\n  }\n\n  loadGeometries() {\n    const dataGeometries = topojson.feature(this.jsonWorld,\n      this.jsonWorld.objects.countries).features;\n\n    // If we have data concerning that affect countries\n    let dataCountries = [];\n    let dataCountriesAssoc = {};\n    if (this.options.countries.groupBy) {\n      dataCountries = d3.nest()\n      .key(this.options.countries.groupBy)\n      .entries(this.maptable.data);\n\n      dataCountriesAssoc = {};\n      dataCountries.forEach(val => {\n        dataCountriesAssoc[val.key] = dataCountries.values;\n      });\n    }\n    // Put dataCountries into dataGeometries if available\n    for (let i = 0; i < dataGeometries.length; i++) {\n      dataGeometries[i].key = dataGeometries[i].id;\n      dataGeometries[i].values = [];\n    }\n\n    // Create countries\n    this.layerCountries.selectAll('.mt-map-country')\n      .data(dataGeometries)\n      .enter()\n      .insert('path')\n      .attr('class', 'mt-map-country')\n      .attr('d', d3.geo.path().projection(this.projection));\n\n    if (this.legendObject &&\n          this.options.countries.attr.fill.min &&\n          this.options.countries.attr.fill.max) {\n      this.legendObject = new Legend(this);\n    }\n    // Countries\n    this.updateCountries();\n\n    // Markers\n    this.updateMarkers();\n  }\n\n  fitContent() {\n    if (this.maptable.data.length === 0) {\n      this.transX = 0;\n      this.transY = 0;\n      this.scale = 1;\n      this.zoomListener.translate([this.transX, this.transY])\n        .scale(this.scale);\n      return true;\n    }\n    const hor = d3.extent(this.maptable.data, d => d.x);\n    const ver = d3.extent(this.maptable.data, d => d.y);\n\n    // center dots with the good ratio\n    const ratio = this.getWidth() / this.getHeight();\n    const deltaMarker = 20 + ((this.options.title) ? 30 : 0);\n\n    const currentWidth = (hor[1] - hor[0]) + deltaMarker;\n    const currentHeight = (ver[1] - ver[0]) + deltaMarker;\n\n    const realHeight = currentWidth / ratio;\n    const realWidth = currentHeight * ratio;\n\n    let diffMarginWidth = 0;\n    let diffMarginHeight = 0;\n    if (realWidth >= currentWidth) {\n      diffMarginWidth = (realWidth - currentWidth) / 2;\n    } else {\n      diffMarginHeight = (realHeight - currentHeight) / 2;\n    }\n\n    // add layout margin\n    hor[0] -= (this.options.fitContentMargin + diffMarginWidth);\n    hor[1] += (this.options.fitContentMargin + diffMarginWidth);\n    ver[0] -= (this.options.fitContentMargin + diffMarginHeight);\n    ver[1] += (this.options.fitContentMargin + diffMarginHeight);\n\n    this.scale = this.getWidth() / (hor[1] - hor[0]);\n    this.transX = -1 * hor[0] * this.scale;\n    this.transY = -1 * ver[0] * this.scale;\n\n    this.zoomListener.translate([this.transX, this.transY]).scale(this.scale);\n  }\n\n  buildTitle() {\n    const titleContainer = this.svg\n      .append('svg')\n      .attr('width', this.getWidth())\n      .attr('x', 0)\n      .attr('y', (this.getHeight() - 30))\n      .attr('height', 30);\n\n    if (this.options.title.bgColor) {\n      titleContainer.append('rect')\n        .attr('x', 0)\n        .attr('y', 0)\n        .attr('width', this.getWidth())\n        .attr('height', 30)\n        .attr('fill', this.options.title.bgColor);\n    }\n\n    titleContainer.append('text')\n      .attr('id', 'mt-map-title')\n      .attr('x', 20)\n      .attr('font-size', this.options.title.fontSize)\n      .attr('font-family', this.options.title.fontFamily)\n      .attr('y', 20);\n\n    if (this.options.title.source) {\n      titleContainer.append('text')\n        .attr('y', 20)\n        .attr('x', (this.getWidth() - 20))\n        .attr('text-anchor', 'end')\n        .attr('font-size', this.options.title.fontSize)\n        .attr('font-family', this.options.title.fontFamily)\n        .html(this.options.title.source());\n    }\n  }\n\n  rescale() {\n    const that = this;\n    if (d3.event && d3.event.translate) {\n      this.scale = d3.event.scale;\n      this.transX = (this.scale === 1) ? 0 : d3.event.translate[0];\n      this.transY = (this.scale === 1) ? 0 : d3.event.translate[1];\n    }\n\n    const maxTransX = 0;\n    const maxTransY = 0;\n    const minTransX = this.getWidth() * (1 - this.scale);\n    const minTransY = this.getHeight() * (1 - this.scale);\n\n    if (this.transY > maxTransY) {\n      this.transY = maxTransY;\n    } else if (this.transY < minTransY) {\n      this.transY = minTransY;\n    }\n\n    if (this.transX > maxTransX) {\n      this.transX = maxTransX;\n    } else if (this.transX < minTransX) {\n      this.transX = minTransX;\n    }\n\n    if (d3.event && d3.event.translate) {\n      d3.event.translate[0] = this.transX;\n      d3.event.translate[1] = this.transY;\n    }\n\n    this.layerGlobal.attr('transform',\n      `translate(${this.transX}, ${this.transY})scale(${this.scale})`);\n\n    // Hide tooltip\n    that.tooltipNode.attr('style', 'display:none;');\n\n    // Rescale markers size\n    if (this.options.markers) {\n      // markers\n      d3.selectAll('.mt-map-marker').each(function (d) {\n        // stroke\n        if (d.prop['stroke-width']) {\n          d3.select(this).attr('stroke-width', d.prop['stroke-width'] / that.scaleAttributes());\n        }\n        // radius\n        if (d.prop.r) {\n          d3.select(this).attr('r', d.prop.r / that.scaleAttributes());\n        }\n      });\n    }\n\n    // Rescale Country stroke-width\n    d3.selectAll('.mt-map-country').each(function (d) {\n      // stroke\n      if (d.prop['stroke-width']) {\n        d3.select(this).attr('stroke-width', d.prop['stroke-width'] / that.scaleAttributes());\n      }\n    });\n  }\n\n  getScaledValue(obj, key, datum, data) {\n    if (typeof (obj.attr[key]) === 'object') {\n      if (!obj.rollup) {\n        throw new Error(`MaptTable: rollup property is not defined for ${key}`);\n      }\n      const range = Object.assign({}, obj.attr[key]); // We clone the property to keep this pure!\n      if (!range.min || !range.max) {\n        throw new Error(`MaptTable: You should provide values for 'min' and 'max' for ${key}`);\n      }\n      const domain = d3.extent(data, d => obj.rollup(d.values));\n\n      if (range.min === 'minValue') {\n        range.min = domain[0];\n      }\n      if (range.max === 'maxValue') {\n        range.max = domain[1];\n      }\n\n      if (typeof (range.transform) === 'function') {\n        range.min = range.transform(range.min);\n        range.max = range.transform(range.max);\n      }\n\n      // Dynamic value\n      const scale = d3.scale.linear()\n        .domain(domain)\n        .range([range.min, range.max]);\n\n      const filteredData = data.filter(d => d.key === datum.key);\n\n      if (!filteredData.length) {\n        if (typeof (range.empty) !== 'undefined') {\n          return range.empty;\n        }\n        throw new Error(`MapTable: no empty property found for ${key}`);\n      }\n      datum.value = obj.rollup(filteredData[0].values);\n      return scale(datum.value);\n    }\n    if (typeof (obj.attr[key]) === 'number' || typeof (obj.attr[key]) === 'string') {\n      // Static value\n      return obj.attr[key];\n    }\n    throw new Error(`Maptable: Invalid value for ${key}`);\n  }\n\n  updateMarkers() {\n    const defaultGroupBy = a => `${a.longitude},${a.latitude}`;\n    const dataMarkers = d3.nest()\n      .key(this.options.markers.groupBy ? this.options.markers.groupBy : defaultGroupBy)\n      .entries(this.maptable.data)\n      .filter(d => {\n        return d.values[0].latitude !== 0;\n      });\n\n    const markerItem = this.layerMarkers\n      .selectAll('.mt-map-marker')\n      .data(dataMarkers);\n\n    // Exit\n    markerItem.exit().transition()\n      .attr('r', 0)\n      .attr('fill', '#eee')\n      .style('opacity', 0)\n      .remove();\n\n    // Enter\n    let markerObject = markerItem.enter();\n    if (this.options.markers.customMarker) {\n      markerObject = this.options.markers.customMarker(markerObject);\n    } else {\n      markerObject = markerObject.append('svg:circle');\n    }\n    const markerClassName = (this.options.markers.className) ?\n      this.options.markers.className : '';\n\n    markerObject.attr('class', `mt-map-marker ${markerClassName}`);\n\n    const attrX = (this.options.markers.attrX) ? this.options.markers.attrX : 'cx';\n    const attrY = (this.options.markers.attrY) ? this.options.markers.attrY : 'cy';\n\n    const attrXDelta = (this.options.markers.attrXDelta) ? this.options.markers.attrXDelta : 0;\n    const attrYDelta = (this.options.markers.attrYDelta) ? this.options.markers.attrYDelta : 0;\n\n    // Update\n    let markerUpdate = markerItem\n      .attr(attrX, d => d.values[0].x + attrXDelta)\n      .attr(attrY, d => d.values[0].y + attrYDelta);\n\n    if (this.options.markers.attr) {\n      Object.keys(this.options.markers.attr).forEach(key => {\n        markerUpdate = markerUpdate.attr(key, datum => {\n          if (!datum.prop) datum.prop = {};\n          datum.prop[key] = this.getScaledValue(this.options.markers, key, datum, dataMarkers);\n          return datum.prop[key];\n        });\n      });\n    }\n\n    if (this.options.markers.tooltip) {\n      this.activateTooltip(markerUpdate, this.options.markers.tooltip);\n    }\n  }\n\n  updateCountries() {\n    const that = this;\n    if (this.options.countries.attr) {\n      let dataCountries = [];\n      const dataCountriesAssoc = {};\n      if (this.options.countries.groupBy) {\n        dataCountries = d3.nest()\n          .key(this.options.countries.groupBy)\n          .entries(this.maptable.data);\n        for (let i = 0; i < dataCountries.length; i++) {\n          dataCountriesAssoc[dataCountries[i].key] = dataCountries[i].values;\n        }\n      }\n\n      const countryItem = d3.selectAll('.mt-map-country')\n        .each(function (datum) {\n          Object.keys(that.options.countries.attr).forEach(key => {\n            d3.select(this).attr(key, () => {\n              if (!datum.prop) datum.prop = {};\n              datum.prop[key] = that.getScaledValue(that.options.countries, key,\n                 datum, dataCountries);\n              return datum.prop[key];\n            });\n          });\n        });\n\n      if (this.legendObject &&\n            this.options.countries.attr.fill.min &&\n            this.options.countries.attr.fill.max) {\n        const domain = d3.extent(dataCountries, d => this.options.countries.rollup(d.values));\n        this.legendObject.updateExtents(domain);\n        countryItem.on('mouseover', (datum) => this.legendObject.indiceChange(datum.value))\n        .on('mouseout', () => this.legendObject.indiceChange(NaN));\n      }\n\n      if (this.options.countries.tooltip) {\n        this.activateTooltip(countryItem, this.options.countries.tooltip);\n      }\n    }\n  }\n\n  render() {\n    this.updateMarkers();\n    this.updateCountries();\n    this.updateTitle();\n    this.fitContent();\n    this.rescale();\n  }\n\n  updateTitle() {\n    if (this.options.title.content) {\n      const showing = this.maptable.data.filter(d => d[this.options.latitudeKey] !== 0).length;\n      const total = this.maptable.rawData.filter(d => d[this.options.latitudeKey] !== 0).length;\n\n      let inlineFilters = '';\n      if (this.maptable.filters) {\n        inlineFilters = this.maptable.filters.getDescription();\n      }\n\n      document.getElementById('mt-map-title').innerHTML = this.options.title\n        .content(showing, total, inlineFilters);\n    }\n  }\n\n  activateTooltip(target, tooltipContent, cb) {\n    target.on('mousemove', d => {\n      const mousePosition = d3.mouse(this.svg.node()).map(v => parseInt(v, 10));\n\n      this.tooltipNode.attr('style', 'display:block;').html(tooltipContent(d));\n\n      const tooltipDelta = this.tooltipNode.node().offsetWidth / 2;\n      const mouseLeft = (mousePosition[0] - tooltipDelta);\n      const mouseTop = (mousePosition[1] + 10 + document.getElementById('mt-map').offsetTop);\n\n      this.tooltipNode.attr('style', `top:${mouseTop}px;left:${mouseLeft}px;display:block;`)\n        .on('mouseout', () => this.tooltipNode.style('display', 'none'));\n\n      if (cb) {\n        this.tooltipNode.on('click', cb);\n      }\n    }).on('mouseout', () => this.tooltipNode.style('display', 'none'));\n  }\n\n  exportSvg() {\n    // Get the d3js SVG element\n    const svg = document.getElementById('mt-map-svg');\n    // Extract the data as SVG text string\n    const svgXml = (new XMLSerializer).serializeToString(svg);\n\n    // Submit the <FORM> to the server.\n    // The result will be an attachment file to download.\n    const form = document.getElementById('mt-map-svg-form');\n    form.querySelector('[name=\"data\"]').value = svgXml;\n    form.submit();\n  }\n\n  addExportSvgCapability() {\n    const exportNode = document.createElement('div');\n    exportNode.setAttribute('id', 'mt-map-export');\n    document.getElementById('mt-map').appendChild(exportNode);\n\n    const exportButton = document.createElement('button');\n    exportButton.setAttribute('class', 'btn btn-xs btn-default');\n    exportButton.innerHTML = '<i class=\"glyphicon glyphicon-download-alt\"></i> Download';\n    exportButton.addEventListener('click', this.exportSvg.bind(this));\n    exportNode.appendChild(exportButton);\n\n    const exportForm = document.createElement('div');\n    exportForm.innerHTML = `<form id=\"mt-map-svg-form\" method=\"post\"\n      action=\"${this.options.exportSvg}\"><input type=\"hidden\" name=\"data\"></form>`;\n    exportNode.appendChild(exportForm);\n  }\n}\n","import utils from '../utils';\n\nexport default class Filters {\n  constructor(maptable, options) {\n    this.maptable = maptable;\n    this.options = options;\n    this.criteria = [];\n\n    if (this.options.show) {\n      const arrayDiff = this.options.show.filter(i => {\n        return Object.keys(this.maptable.columnDetails).indexOf(i) < 0;\n      });\n      if (arrayDiff.length > 0) {\n        throw new Error(`MapTable: invalid columns \"${arrayDiff.join(', ')}\"`);\n      }\n      this.activeColumns = this.options.show;\n    } else {\n      this.activeColumns = Object.keys(this.maptable.columnDetails);\n    }\n\n    this.container = document.createElement('div');\n    this.maptable.node.appendChild(this.container);\n\n    this.node = document.querySelector('#mt-filters');\n    if (!this.node) {\n      this.node = document.createElement('div');\n      this.node.setAttribute('class', 'mt-filters');\n      this.node.setAttribute('class', 'panel panel-default');\n      this.maptable.node.appendChild(this.node);\n    }\n\n    // -- Filters Header\n\n    const filtersHeaderNode = document.createElement('div');\n    filtersHeaderNode.setAttribute('class', 'panel-heading');\n\n    const filtersResetNode = document.createElement('button');\n    filtersResetNode.setAttribute('id', 'mt-filters-reset');\n    filtersResetNode.setAttribute('class', 'btn btn-default btn-xs pull-right');\n    filtersResetNode.style.display = 'none';\n    filtersResetNode.style.marginLeft = 5;\n    filtersResetNode.innerText = '↺ Reset';\n    filtersResetNode.addEventListener('click', this.reset);\n    filtersHeaderNode.appendChild(filtersResetNode);\n\n    const filtersTitleNode = document.createElement('h3');\n    filtersTitleNode.setAttribute('class', 'panel-title');\n    filtersTitleNode.appendChild(document.createTextNode('Filters'));\n    filtersHeaderNode.appendChild(filtersTitleNode);\n\n    this.node.appendChild(filtersHeaderNode);\n\n    // -- Filters Content\n    const filtersBodyNode = document.createElement('div');\n    filtersBodyNode.setAttribute('id', 'mt-filters-content');\n    filtersBodyNode.setAttribute('class', 'panel-body');\n\n    const filtersElementsNode = document.createElement('div');\n    filtersElementsNode.setAttribute('id', 'mt-filters-elements');\n    filtersBodyNode.appendChild(filtersElementsNode);\n\n    const filtersNewNode = document.createElement('a');\n    filtersNewNode.setAttribute('id', 'mt-filters-new');\n    filtersNewNode.setAttribute('href', '#');\n    filtersNewNode.innerText = '+ New filter';\n    filtersNewNode.addEventListener('click', this.add.bind(this));\n    filtersBodyNode.appendChild(filtersNewNode);\n\n    this.node.appendChild(filtersBodyNode);\n  }\n\n  add() {\n    const possibleFilters = this.getPossibleFilters();\n\n    if (possibleFilters.length === 0) {\n      return;\n    }\n    const filterName = possibleFilters[0].key;\n    this.create(filterName);\n  }\n\n  create(filterName, replaceNode) {\n    const rowNode = this.buildRow(filterName);\n    if (replaceNode) {\n      replaceNode.parentNode.replaceChild(rowNode, replaceNode);\n    } else {\n      document.querySelector('#mt-filters-elements').appendChild(rowNode);\n    }\n    this.criteria.push(filterName);\n    this.maptable.render();\n    if (this.container.style.display === 'none') {\n      this.toggle();\n    }\n  }\n\n  remove(filterName) {\n    const rowNode = document.querySelector(`[data-mt-filter-name=\"${filterName}\"]`);\n    if (rowNode) rowNode.remove();\n    const filterIndex = this.criteria.indexOf(filterName);\n    this.criteria.splice(filterIndex, 1);\n    this.maptable.render();\n  }\n\n  reset() {\n    this.criteria = [];\n    this.container.innerHTML = '';\n    this.refresh();\n    this.maptable.map.reset();\n  }\n\n  getDescription() {\n    const outputArray = [];\n\n    const filtersChildren = document.querySelector('#mt-filters-elements').childNodes;\n\n    for (let i = 0; i < filtersChildren.length; i++) {\n      const element = filtersChildren[i];\n      const filterName = element.querySelector('.mt-filter-name').value;\n\n      const filterOptions = this.maptable.columnDetails[filterName];\n\n      let line = '';\n\n      if (filterOptions.type === 'number' || filterOptions.type === 'custom') {\n        const filterRangeSelect = element.querySelector('.mt-filter-range');\n        if (filterRangeSelect.value !== 'any') {\n          if (filterRangeSelect.value === 'BETWEEN') {\n            const filterValueMin = element.querySelector('.mt-filter-value-min').value;\n            const filterValueMax = element.querySelector('.mt-filter-value-max').value;\n            if (filterValueMin === '' || filterValueMax === '') continue;\n            line += `${filterOptions.title} is between `;\n            line += `<tspan font-weight=\"bold\">${filterValueMin}</tspan> and\n              <tspan font-weight=\"bold\">${filterValueMax}</tspan>`;\n          } else {\n            const filterValue = element.querySelector('.mt-filter-value').value;\n            if (filterValue === '') continue;\n            line += `${filterOptions.title} is `;\n            line += filterRangeSelect.options[filterRangeSelect.selectedIndex].text;\n            line += `<tspan font-weight=\"bold\">${filterValue}</tspan>`;\n          }\n        }\n      } else if (filterOptions.type === 'field' || filterOptions.type === 'dropdown') {\n        const filterValue = element.querySelector('.mt-filter-value').value;\n        if (filterValue === '') continue;\n        const separatorWord = (filterOptions.type === 'field') ? 'contains' : 'is';\n        line += `${filterOptions.title} ${separatorWord}\n          <tspan font-weight=\"bold\">${filterValue}</tspan>`;\n      }\n      outputArray.push(line);\n    }\n    return outputArray.join(', ');\n  }\n\n  buildRow(filterName) {\n    const that = this;\n\n    const possibleFilters = this.getPossibleFilters();\n\n    const filterOptions = this.maptable.columnDetails[filterName];\n\n    const rowNode = document.createElement('div');\n    rowNode.setAttribute('class', 'mt-filter-row');\n    rowNode.setAttribute('data-mt-filter-name', filterName);\n\n    // Button to remove filter\n    const minusButton = document.createElement('button');\n    minusButton.setAttribute('class', 'btn btn-default pull-right');\n    minusButton.setAttribute('data-mt-filter-btn-minus', 1);\n    minusButton.innerText = '– Remove this filter';\n    minusButton.addEventListener('click', () => {\n      filterName = rowNode.querySelector('.mt-filter-name').value;\n      this.remove(filterName);\n    });\n    rowNode.appendChild(minusButton);\n\n    // Filters separator \"AND\"\n    const filterSeparator = document.createElement('span');\n    filterSeparator.setAttribute('class', 'mt-filters-and');\n    filterSeparator.innerText = 'And ';\n    rowNode.appendChild(filterSeparator);\n\n    // Filter name select\n    const filterNameSelect = document.createElement('select');\n    filterNameSelect.setAttribute('class', 'mt-filter-name form-control form-control-inline');\n    utils.appendOptions(filterNameSelect, possibleFilters.map(f => {\n      return { text: f.title, value: f.key };\n    }));\n    filterNameSelect.value = filterName;\n\n    filterNameSelect.addEventListener('change', function () {\n      const oldFilterName = this.parentNode.getAttribute('data-mt-filter-name');\n      const newFilterName = this.value;\n      that.create(newFilterName, this.parentNode);\n      that.remove(oldFilterName);\n      that.refresh();\n    });\n    rowNode.appendChild(filterNameSelect);\n\n    // Filter verb\n    const filterVerb = document.createElement('span');\n    filterVerb.innerText = (filterOptions.type === 'field') ? ' contains ' : ' is ';\n    rowNode.appendChild(filterVerb);\n\n    // Filter range\n    let filterRange = null;\n    if (filterOptions.type !== 'field' && filterOptions.type !== 'dropdown') {\n      filterRange = document.createElement('select');\n      filterRange.setAttribute('class', 'mt-filter-range form-control form-control-inline');\n      utils.appendOptions(filterRange, ['any', '=', '≠', '<', '>', '≤', '≥', 'BETWEEN'].map(v => {\n        return { text: v, value: v };\n      }));\n      filterRange.addEventListener('change', function () {\n        that.handleRangeChange(this);\n      });\n      rowNode.appendChild(filterRange);\n\n      // Little space:\n      rowNode.appendChild(document.createTextNode(' '));\n    }\n\n    // Filter value\n    const filterValue = document.createElement('div');\n    filterValue.style.display = 'inline-block';\n    filterValue.setAttribute('class', 'mt-filter-value-container');\n\n    if (filterOptions.type === 'number' || filterOptions.type === 'custom') {\n      ['min', 'max'].forEach((val, i) => {\n        const filterInput = document.createElement('input');\n        filterInput.setAttribute('class',\n          `form-control form-control-inline mt-filter-value-${val}`);\n        if (filterOptions.type) {\n          filterInput.setAttribute('type', filterOptions.type);\n        } else {\n          filterInput.setAttribute('type', 'text');\n        }\n        filterInput.addEventListener('keyup', this.maptable.render.bind(this.maptable));\n        filterInput.addEventListener('change', this.maptable.render.bind(this.maptable));\n        filterValue.appendChild(filterInput);\n        if (i === 0) {\n          // AND\n          const filterValueAnd = document.createElement('span');\n          filterValueAnd.setAttribute('class', 'mt-filter-value-and');\n          filterValueAnd.innerText = ' and ';\n          filterValue.appendChild(filterValueAnd);\n        }\n      });\n    } else if (filterOptions.type === 'field') {\n      const filterInput = document.createElement('input');\n      filterInput.setAttribute('class', 'form-control form-control-inline mt-filter-value');\n      filterInput.setAttribute('type', 'text');\n      filterInput.addEventListener('keyup', this.maptable.render.bind(this.maptable));\n      filterInput.addEventListener('change', this.maptable.render.bind(this.maptable));\n      filterValue.appendChild(filterInput);\n    } else if (filterOptions.type === 'dropdown') {\n      const filterSelect = document.createElement('select');\n      filterSelect.setAttribute('class', 'form-control form-control-inline mt-filter-value');\n\n      const uniqueValues = d3.nest().key(d => d[filterName])\n        .sortKeys(d3.ascending)\n        .entries(this.maptable.rawData);\n\n      utils.appendOptions(filterSelect, [{ text: 'Any', value: '' }].concat(uniqueValues.map(k => {\n        return { text: k.key, value: k.key };\n      })));\n\n      filterSelect.addEventListener('change', this.maptable.render.bind(this.maptable));\n      filterValue.appendChild(filterSelect);\n    }\n\n    rowNode.appendChild(filterValue);\n\n    // We trigger it here to handle the value of the filter range\n    if (filterRange) {\n      this.handleRangeChange(filterRange);\n    }\n\n    return rowNode;\n  }\n\n  handleRangeChange(filterRange) {\n    const rowNode = filterRange.parentNode;\n    if (filterRange.value === 'any') {\n      rowNode.querySelector('.mt-filter-value-container').style.display = 'none';\n    } else {\n      rowNode.querySelector('.mt-filter-value-container').style.display = 'inline-block';\n      if (filterRange.value === 'BETWEEN') {\n        rowNode.querySelector('.mt-filter-value-min').style.display = 'inline-block';\n        rowNode.querySelector('.mt-filter-value-max').style.display = 'inline-block';\n      } else {\n        rowNode.querySelector('.mt-filter-value-max').style.display = 'none';\n        rowNode.querySelector('.mt-filter-value-and').style.display = 'none';\n      }\n    }\n  }\n\n  getPossibleFilters(except) {\n    return Object.keys(this.maptable.columnDetails)\n      .map(k => Object.assign({ key: k }, this.maptable.columnDetails[k]))\n      .filter(v => {\n        return (this.activeColumns.indexOf(v.key) !== -1) &&\n        (\n          (except && except === v.key) ||\n          (this.criteria.indexOf(v.key) === -1 && v.type && v.type !== 'virtual')\n        );\n      });\n  }\n\n  filterData() {\n    this.maptable.data = this.maptable.rawData.filter(d => {\n      const rowNodes = document.querySelectorAll('.mt-filter-row');\n      for (let i = 0; i < rowNodes.length; i++) {\n        const rowNode = rowNodes[i];\n        const filterName = rowNode.getAttribute('data-mt-filter-name');\n        const filterOptions = this.maptable.columnDetails[filterName];\n        const fmt = filterOptions.dataFormat; // shortcut\n\n        if (filterOptions.type === 'dropdown') {\n          const filterValue = rowNode.querySelector('.mt-filter-value').value;\n          if (filterValue === '') continue;\n          if (d[filterName] !== filterValue) return false;\n        } else if (filterOptions.type === 'field') {\n          const filterValue = rowNode.querySelector('.mt-filter-value').value;\n          if (filterValue === '') continue;\n          return (d[filterName].toLowerCase().indexOf(filterValue.toLowerCase()) !== -1);\n        } else if (filterOptions.type === 'number' || filterOptions.type === 'custom') {\n          const filterRange = rowNode.querySelector('.mt-filter-range').value;\n          if (filterRange === 'BETWEEN') {\n            const filterValueMin = rowNode.querySelector('.mt-filter-value-min').value;\n            const filterValueMax = rowNode.querySelector('.mt-filter-value-max').value;\n            if (filterValueMin === '' || filterValueMax === '') continue;\n\n            if (filterOptions.type === 'custom' && fmt) {\n              if (fmt) {\n                if (fmt(d[filterName]) < fmt(filterValueMin) ||\n                  fmt(d[filterName]) > fmt(filterValueMax)) {\n                  return false;\n                }\n              }\n            } else {\n              if (parseInt(d[filterName], 10) < parseInt(filterValueMin, 10) ||\n                  parseInt(d[filterName], 10) > parseInt(filterValueMax, 10)) {\n                return false;\n              }\n            }\n          } else {\n            const filterValue = rowNode.querySelector('.mt-filter-value').value;\n            if (filterValue === '') continue;\n            if (filterOptions.type === 'custom' && fmt) {\n              if (!utils.rangeToBool(fmt(d[filterName]), filterRange, fmt(filterValue))) {\n                return false;\n              }\n            } else {\n              if (!utils.rangeToBool(d[filterName], filterRange, filterValue)) {\n                return false;\n              }\n            }\n          }\n        }\n      }\n      return true;\n    });\n  }\n\n  refresh() {\n    // update dropdown\n    const filterNameSelects = document.querySelectorAll('.mt-filter-name');\n    for (let i = 0; i < filterNameSelects.length; i++) {\n      const filterNameSelect = filterNameSelects[i];\n      const filterName = filterNameSelect.value;\n      const possibleFilters = this.getPossibleFilters(filterName);\n      filterNameSelect.innerHTML = '';\n      utils.appendOptions(filterNameSelect, possibleFilters.map(f => {\n        return { text: f.title, value: f.key };\n      }));\n      filterNameSelect.value = filterName;\n    }\n\n    // Hide the first \"And\"\n    if (document.querySelectorAll('.mt-filters-and').length > 0) {\n      document.querySelectorAll('.mt-filters-and')[0].style.visibility = 'hidden';\n    }\n\n    // Check if we reached the maximum of allowed filters\n    const disableNewFilter = (!this.getPossibleFilters().length);\n    document.querySelector('#mt-filters-new').style.visibility = disableNewFilter ?\n      'hidden' : 'visible';\n  }\n\n  toggle() {\n    if (this.container.style.display === 'none') {\n      this.container.style.display = 'block';\n      if (this.criteria.length === 0) {\n        this.add();\n      }\n    } else {\n      this.container.style.display = 'none';\n    }\n  }\n}\n","import utils from '../utils';\n\nexport default class Table {\n  constructor(maptable, options) {\n    this.maptable = maptable;\n    this.options = options;\n    this.currentSorting = { key: Object.keys(this.maptable.data[0])[0], mode: 'desc' };\n\n    this.node = document.querySelector('#mt-table');\n    if (!this.node) {\n      this.node = document.createElement('div');\n      this.node.setAttribute('id', 'mt-table');\n      this.maptable.node.appendChild(this.node);\n    }\n\n    this.node = d3.select(this.node)\n      .append('table')\n      .attr('class', this.options.className);\n\n    this.header = this.node.append('thead');\n\n    this.body = this.node.append('tbody');\n\n    if (this.options.show) {\n      const arrayDiff = this.options.show.filter(i => {\n        return Object.keys(this.maptable.columnDetails).indexOf(i) < 0;\n      });\n      if (arrayDiff.length > 0) {\n        throw new Error(`MapTable: invalid columns \"${arrayDiff.join(', ')}\"`);\n      }\n      this.activeColumns = this.options.show;\n    } else {\n      this.activeColumns = Object.keys(this.maptable.columnDetails);\n    }\n\n    this.header.selectAll('tr')\n      .data([1])\n      .enter()\n      .append('tr')\n      .selectAll('th')\n      .data(this.activeColumns.map(k => Object.assign({ key: k }, this.maptable.columnDetails[k])))\n      .enter()\n      .append('th')\n      .attr('class', d => {\n        let output = (d.sorting) ? 'mt-table-sortable' : '';\n        output += (d.nowrap) ? ' nowrap' : '';\n        return output;\n      })\n      .attr('style', d => (d.nowrap) ? 'white-space:nowrap;' : '')\n      .text(d => d.title)\n      .attr('id', d => `column_header_${utils.sanitizeKey(d.key)}`)\n      .on('click', d => {\n        if (d.sorting) {\n          this.sortColumn(d.key);\n        }\n      });\n\n    if (this.options.defaultSorting) {\n      this.sortColumn(this.options.defaultSorting.key, this.options.defaultSorting.mode);\n    } else {\n      this.render();\n    }\n  }\n\n\n  render() {\n    // Apply Sort\n    this.applySort();\n\n    // Enter\n    this.body.selectAll('tr')\n      .data(this.maptable.data)\n      .enter()\n      .append('tr');\n\n    // Exit\n    this.body.selectAll('tr')\n      .data(this.maptable.data)\n      .exit()\n      .remove();\n\n    // Update\n    const uniqueCollapsedRows = [];\n    this.body.selectAll('tr')\n      .data(this.maptable.data)\n      .attr('class', row => {\n        if (this.options.rowClassName) {\n          return `line ${this.options.rowClassName(row)}`;\n        }\n        return 'line';\n      })\n      .html(row => {\n        let tds = '';\n        this.activeColumns.forEach(columnKey => {\n          const column = this.maptable.columnDetails[columnKey];\n          tds += '<td';\n          if (column.nowrap) {\n            tds += ' style=\"white-space:nowrap;\"';\n          }\n          tds += '>';\n\n          if (!(\n              this.options.collapseRowsBy.indexOf(columnKey) !== -1 &&\n              uniqueCollapsedRows[columnKey] &&\n              uniqueCollapsedRows[columnKey] === row[columnKey]\n            )) {\n            if (typeof (column.cellContent) === 'function') {\n              tds += column.cellContent(row);\n            } else {\n              if (row[columnKey] && row[columnKey] !== 'null') tds += row[columnKey];\n            }\n            if (this.options.collapseRowsBy.indexOf(columnKey) !== -1) {\n              uniqueCollapsedRows[columnKey] = row[columnKey];\n            }\n          }\n          tds += '</td>';\n        });\n        return tds;\n      });\n  }\n\n  applySort() {\n    const d3SortMode = (this.currentSorting.mode === 'asc') ? d3.ascending : d3.descending;\n    const filterOptions = this.maptable.columnDetails[this.currentSorting.key];\n    this.maptable.data = this.maptable.data.sort((a, b) => {\n      let el1 = a[this.currentSorting.key];\n      let el2 = b[this.currentSorting.key];\n      if (filterOptions.type === 'virtual' && filterOptions.cellContent) {\n        el2 = filterOptions.cellContent(a);\n        el2 = filterOptions.cellContent(b);\n      } else if (filterOptions.type === 'number') {\n        el1 = parseInt(el1, 10);\n        el2 = parseInt(el2, 10);\n      } else if (filterOptions.dataFormat) {\n        el1 = filterOptions.dataFormat(el1);\n        el2 = filterOptions.dataFormat(el2);\n      } else {\n        el1 = el1.toLowerCase();\n        el2 = el2.toLowerCase();\n      }\n      return d3SortMode(el1, el2);\n    });\n  }\n\n  sortColumn(columnKey, columnMode) {\n    this.currentSorting.key = columnKey;\n    if (columnKey === this.currentSorting.key) {\n      this.currentSorting.mode = (this.currentSorting.mode === 'asc') ? 'desc' : 'asc';\n    } else if (columnMode) {\n      this.currentSorting.mode = columnMode;\n    } else {\n      this.currentSorting.mode = 'asc';\n    }\n\n    const sortableColums = document.querySelectorAll('.mt-table-sortable');\n    for (let i = 0; i < sortableColums.length; i++) {\n      sortableColums[i].setAttribute('class', 'mt-table-sortable');\n    }\n    document.getElementById(`column_header_${utils.sanitizeKey(columnKey)}`)\n      .setAttribute('class', `mt-table-sortable sort_${this.currentSorting.mode}`);\n\n    this.render();\n  }\n}\n","import utils from './utils';\n\nimport GeoMap from './components/GeoMap';\nimport Filters from './components/Filters';\nimport Table from './components/Table';\n\nexport default class MapTable {\n  constructor(target, options) {\n    this.options = options;\n\n    this.node = document.querySelector(target);\n\n    if (this.options.data.type === 'json') {\n      d3.json(this.options.data.path, this.loadData.bind(this));\n    } else if (this.options.data.type === 'csv') {\n      d3.csv(this.options.data.path, this.loadData.bind(this));\n    } else if (this.options.data.type === 'tsv') {\n      d3.tsv(this.options.data.path, this.loadData.bind(this));\n    }\n  }\n\n  loadData(err, data) {\n    if (err) {\n      throw err;\n    }\n    this.rawData = data;\n    this.setColumnDetails();\n    this.data = data.slice(); // we clone data, so that we can filter it\n    // Map\n    if (this.options.map) {\n      d3.json(this.options.map.path, (errGeoMap, jsonWorld) => {\n        if (errGeoMap) {\n          throw errGeoMap;\n        }\n        this.map = new GeoMap(this, this.options.map, jsonWorld);\n        this.render();\n      });\n    }\n\n    // Filters\n    if (this.options.filters) {\n      this.filters = new Filters(this, this.options.filters);\n    }\n\n    // Table\n    if (this.options.table) {\n      this.table = new Table(this, this.options.table);\n    }\n  }\n\n  render() {\n    if (this.filters) {\n      this.filters.filterData();\n      this.filters.refresh();\n    }\n\n    if (this.map) {\n      this.map.render();\n    }\n\n    if (this.table) {\n      this.table.render();\n    }\n  }\n\n  setColumnDetails() {\n    const that = this;\n    if (that.rawData.length === 0) {\n      return;\n    }\n    const defaultColumns = {};\n\n    Object.keys(that.rawData[0]).forEach(k => {\n      let columnType = 'field';\n      const patternNumber = /^\\d+$/;\n      if (patternNumber.test(that.rawData[0][k])) {\n        columnType = 'number';\n      }\n      defaultColumns[k] = {\n        title: utils.keyToTile(k),\n        type: columnType,\n        sorting: true,\n      };\n    });\n    that.columnDetails = utils.extendRecursive(defaultColumns, this.options.columns);\n  }\n}\n","/* eslint no-unused-vars: 0 */\nimport utils from './utils';\nimport defaultOptions from './defaultOptions';\nimport MapTable from './MapTable';\n\nd3.maptable = function (target) {\n  let maptableObject;\n  const maptable = {};\n  const options = {\n    target: target,\n    columns: {},\n    data: {},\n    map: null,\n    filters: null,\n    table: null,\n  };\n\n  maptable.map = function (mapOptions = {}) {\n    if (!topojson) {\n      throw new Error('Maptable requires topojson.js');\n    }\n    if (typeof(mapOptions.path) !== 'string') {\n      throw new Error('MapTable: map not provided');\n    }\n    options.map = mapOptions;\n    return maptable;\n  };\n\n  maptable.json = function (jsonPath) {\n    options.data.type = 'json';\n    options.data.path = jsonPath;\n    return maptable;\n  };\n\n  maptable.csv = function (csvPath) {\n    options.data.type = 'csv';\n    options.data.path = csvPath;\n    return maptable;\n  };\n\n  maptable.tsv = function (tsvPath) {\n    options.data.type = 'tsv';\n    options.data.path = tsvPath;\n    return maptable;\n  };\n\n  maptable.filters = function (filtersOptions = {}) {\n    options.filters = filtersOptions;\n    return maptable;\n  };\n\n  maptable.table = function (tableOptions = {}) {\n    options.table = tableOptions;\n    return maptable;\n  };\n\n  maptable.columns = function (columns = {}) {\n    options.columns = columns;\n    return maptable;\n  };\n\n  maptable.render = function () {\n    if (typeof(target) !== 'string' || !document.querySelector(target)) {\n      throw new Error('MapTable: target not found');\n    }\n\n    if (!options.data || !options.data.path) {\n      throw new Error('MapTable: Please provide the path for your dataset json|csv|tsv');\n    }\n\n    const customOptions = utils.extendRecursive(defaultOptions, options);\n    maptableObject = new MapTable(target, customOptions);\n  };\n  return maptable;\n};\n\nif (!d3) {\n  throw new Error('Maptable requires d3.js');\n}\n\nexport default d3.maptable;\n"],"names":["Legend","Watermark"],"mappings":"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"}