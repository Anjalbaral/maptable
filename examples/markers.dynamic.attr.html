<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="bootstrap.min.css">
    <link rel="stylesheet" href="maptable.css">
    <title>MapTable: Basic with Map, Filters and Table - minimal options</title>
</head>
<body>

<script src="d3.min.js" charset="utf-8"></script>
<script src="topojson.min.js"></script>
<script src="maptable.js"></script>

<div id="vizContainer" class='container'></div>

<script>
    var viz = d3.maptable('#vizContainer')
            .csv('basic.csv')
            .map({
                path: 'ne_110m_admin_0_countries.json',
                markers: {
                    attr: {
                        fill: function(groupedData) {
                            var totalTraffic = 0;
                            groupedData.values.forEach(function(d) {
                                totalTraffic += Number(d.traf);
                            });
                            console.log(totalTraffic);
                            if (totalTraffic && totalTraffic > 50000000) return 'green';
                            return 'red';
                        }
                    }
                }
            })
            .filters()
            .table()
            .render();
</script>
</body>
</html>