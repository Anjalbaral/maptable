<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="../vendor/bootstrap.min.css">
  <link rel="stylesheet" href="../maptable.css">
  <title>MapTable example</title>
</head>
<body>

  <script src="../vendor/d3.min.js" charset="utf-8"></script>
  <script src="../vendor/topojson.min.js"></script>
  <script src="../maptable.js"></script>

<div id="vizContainer" class='container'></div>

<script>
    var viz = d3.maptable('#vizContainer')
    .csv('global_airports.csv')
    .map({
      path: 'ne_110m_admin_0_countries.json',
      autoFitContent: true,
      markers: {
        tooltip: function(a) {
          out = '<div class="arrow"></div>';
          if (a.values.length === 0) {
            out += '<h3 class="popover-title"> ' + a.key + '</h3>';
            out += '<div class="popover-content">N/A</div>';
          } else {
            out += '<h3 class="popover-title"> ' + a.values[0].city + ', ' + a.values[0].country + '</h3>';
            out += '<div class="popover-content">';
            for (i = 0; i < a.values.length; i++) out += " â€¢ " + a.values[i].name + "<br>";
            out += "</div>";
          }
          return out;
        },
        attr: {
          r: {
            min: 1,
            max: 10,
            rollup: function(groupedData) {
              return groupedData.length;
            }
          },
        }
      }
    })
    .filters()
    .render();
</script>


</body>
</html>